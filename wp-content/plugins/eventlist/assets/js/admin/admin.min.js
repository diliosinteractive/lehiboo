!function(b){EL_Admin={init:function(){b("#el_tabs").tabs(),this.admin_setting_tab(),this.gallery_image(),this.map(),this.edit_full_address(),this.el_load_venue(),this.contact(),this.date_time_picker(),this.radio_single_banner(),this.image_banner(),this.add_image_ticket(),this.remove_image_ticket(),this.radio_seat_option(),this.radio_type_price(),this.add_image_ticket_map(),this.remove_image_ticket_map(),this.color_picker_ticket(),this.add_ticket(),this.add_seat_map(),this.add_area_map(),this.add_person_type(),this.add_pertype_seat(),this.add_desc_seat_map(),this.type_map_change(),this.sortable_ticket(),this.toggle_ticket(),this.count_tickets(),this.repair_key_ticket(),this.remove_ticket(),this.calendar(),this.coupon(),this.create_ticket_send_mail(),this.download_ticket(),this.update_status_proccess(),this.add_image_category(),this.remove_image_category(),this.add_ckf_for_category(),this.add_custom_booking(),this.el_datepicker(),this.ova_checkout_field(),this.ova_metabox_booking_checkout_field(),this.ova_metabox_ticket_checkout_field(),this.el_choose_event_type(),this.el_choose_link_ticket(),this.el_enable_cancellation_booking(),this.el_show_hide_x_day_profit(),this.el_check_book_before_minutes(),this.el_check_schedules_time_book(),this.el_check_calendar_recurrence_time_book(),this.el_time_slot_timepicker(),this.el_time_slot(),this.el_system_fee(),this.el_edit_ticket_detail(),this.el_replace_ticket_date(),this.el_pdf_invoice(),this.el_input_required(),this.el_payout_edit(),this.el_admin_validate_price_tiket(),this.el_event_setting_cron_job(),this.el_booking_person_type_qty_update(),this.el_event_setting_ticket_transfer(),this.el_package_setting(),this.el_add_services(),this.el_remove_service(),this.el_ticket_list_table(),this.el_tippy(),this.el_setup_mode_input(),this.el_add_seat_code_row(),this.el_remove_seat_code_row(),this.el_seat_code_validate(),this.el_add_image(),this.el_remove_seating_map(),this.fix_menu()},fix_menu:function(){var e=el_custom_tax_slug.map(function(e,t,a){return"edit-"+e});switch(pagenow){case"venue":b("#adminmenu li.toplevel_page_eventlist").removeClass("wp-not-current-submenu").addClass("wp-menu-open").addClass("wp-has-current-submenu"),b("#adminmenu a.toplevel_page_eventlist").removeClass("wp-not-current-submenu").addClass("wp-has-current-submenu").addClass("wp-menu-open"),b('#adminmenu a[href="edit.php?post_type=venue"]').addClass("current").closest("li").addClass("current");break;case"payout_method":b("#adminmenu li.toplevel_page_eventlist").removeClass("wp-not-current-submenu").addClass("wp-menu-open").addClass("wp-has-current-submenu"),b("#adminmenu a.toplevel_page_eventlist").removeClass("wp-not-current-submenu").addClass("wp-has-current-submenu").addClass("wp-menu-open"),b('#adminmenu a[href="admin.php?page=ova_el_display_profit_event"]').addClass("current").closest("li").addClass("current"),b('#adminmenu a[href="edit.php?post_type=payout"]').addClass("current").closest("li").addClass("current");break;case"package":b("#adminmenu li.toplevel_page_eventlist").removeClass("wp-not-current-submenu").addClass("wp-menu-open").addClass("wp-has-current-submenu"),b("#adminmenu a.toplevel_page_eventlist").removeClass("wp-not-current-submenu").addClass("wp-has-current-submenu").addClass("wp-menu-open"),b('#adminmenu a[href="edit.php?post_type=package"]').addClass("current").closest("li").addClass("current");break;case"manage_membership":b("#adminmenu li.toplevel_page_eventlist").removeClass("wp-not-current-submenu").addClass("wp-menu-open").addClass("wp-has-current-submenu"),b("#adminmenu a.toplevel_page_eventlist").removeClass("wp-not-current-submenu").addClass("wp-has-current-submenu").addClass("wp-menu-open"),b('#adminmenu a[href="edit.php?post_type=manage_membership"]').addClass("current").closest("li").addClass("current");break;case"events_page_ova_el_display_report_user":b('#adminmenu a[href="admin.php?page=ova_el_display_report_sales"]').addClass("current").closest("li").addClass("current");break;case"events_page_ova_el_custom_checkout_field":b('#adminmenu a[href="edit.php?post_type=el_bookings"]').addClass("current").closest("li").addClass("current");break;case"events_page_el_replace_ticket_date":b('#adminmenu a[href="edit.php?post_type=el_tickets"]').addClass("current").closest("li").addClass("current");break;case"edit-el_tickets":b(".page-title-action").after('<a href="admin.php?page=el_replace_ticket_date" class="page-title-action">'+el_btn_obj?.reschedule_ticket+"</a>");break;case"edit-el_bookings":b(".page-title-action").after('<a href="admin.php?page=ova_el_custom_checkout_field" class="page-title-action">'+el_btn_obj?.custom_checkout_field+"</a>");break;case"event":b("#adminmenu li.toplevel_page_eventlist").removeClass("wp-not-current-submenu").addClass("wp-menu-open").addClass("wp-has-current-submenu"),b("#adminmenu a.toplevel_page_eventlist").removeClass("wp-not-current-submenu").addClass("wp-has-current-submenu").addClass("wp-menu-open");break;case"el_bookings":b("#adminmenu li.toplevel_page_eventlist").removeClass("wp-not-current-submenu").addClass("wp-menu-open").addClass("wp-has-current-submenu"),b("#adminmenu a.toplevel_page_eventlist").removeClass("wp-not-current-submenu").addClass("wp-has-current-submenu").addClass("wp-menu-open"),b('#adminmenu a[href="edit.php?post_type=el_bookings"]').addClass("current").closest("li").addClass("current");break;case"edit-package":b(".page-title-action").after('<a href="edit.php?post_type=manage_membership" class="page-title-action">'+el_btn_obj?.all_membership+"</a>");break;case"edit-manage_membership":b('#adminmenu a[href="edit.php?post_type=package"]').addClass("current").closest("li").addClass("current");break;case"edit-payout":b(".page-title-action").after('<a href="edit.php?post_type=payout_method" class="page-title-action">'+el_btn_obj?.payout_method+"</a>");break;case"payout":b("#adminmenu li.toplevel_page_eventlist").removeClass("wp-not-current-submenu").addClass("wp-menu-open").addClass("wp-has-current-submenu"),b("#adminmenu a.toplevel_page_eventlist").removeClass("wp-not-current-submenu").addClass("wp-has-current-submenu").addClass("wp-menu-open"),b('#adminmenu a[href="edit.php?post_type=payout"]').addClass("current").closest("li").addClass("current");break;case"edit-payout_method":b('#adminmenu a[href="admin.php?page=ova_el_display_profit_event"]').addClass("current").closest("li").addClass("current"),b('#adminmenu a[href="edit.php?post_type=payout"]').addClass("current").closest("li").addClass("current");break;case"el_tickets":b("#adminmenu li.toplevel_page_eventlist").removeClass("wp-not-current-submenu").addClass("wp-menu-open").addClass("wp-has-current-submenu"),b("#adminmenu a.toplevel_page_eventlist").removeClass("wp-not-current-submenu").addClass("wp-has-current-submenu").addClass("wp-menu-open"),b('#adminmenu a[href="edit.php?post_type=el_tickets"]').addClass("current").closest("li").addClass("current");break;case"edit-event_cat":b("#adminmenu li.toplevel_page_eventlist").removeClass("wp-not-current-submenu").addClass("wp-menu-open").addClass("wp-has-current-submenu"),b("#adminmenu a.toplevel_page_eventlist").removeClass("wp-not-current-submenu").addClass("wp-has-current-submenu").addClass("wp-menu-open"),b('#adminmenu a[href="edit-tags.php?taxonomy=event_cat&post_type=event"]').addClass("current").closest("li").addClass("current");break;case"edit-event_tag":b("#adminmenu li.toplevel_page_eventlist").removeClass("wp-not-current-submenu").addClass("wp-menu-open").addClass("wp-has-current-submenu"),b("#adminmenu a.toplevel_page_eventlist").removeClass("wp-not-current-submenu").addClass("wp-has-current-submenu").addClass("wp-menu-open"),b('#adminmenu a[href="edit-tags.php?taxonomy=event_tag&post_type=event"]').addClass("current").closest("li").addClass("current");break;case"edit-event_loc":b("#adminmenu li.toplevel_page_eventlist").removeClass("wp-not-current-submenu").addClass("wp-menu-open").addClass("wp-has-current-submenu"),b("#adminmenu a.toplevel_page_eventlist").removeClass("wp-not-current-submenu").addClass("wp-has-current-submenu").addClass("wp-menu-open"),b('#adminmenu a[href="edit-tags.php?taxonomy=event_loc&post_type=event"]').addClass("current").closest("li").addClass("current")}-1!==e.indexOf(pagenow)&&(b("#adminmenu li.toplevel_page_eventlist").removeClass("wp-not-current-submenu").addClass("wp-menu-open").addClass("wp-has-current-submenu"),b("#adminmenu a.toplevel_page_eventlist").removeClass("wp-not-current-submenu").addClass("wp-has-current-submenu").addClass("wp-menu-open"),b('#adminmenu a[href="admin.php?page=custom-taxonomy"]').addClass("current").closest("li").addClass("current"))},el_tippy:function(){tippy("[data-tippy-content]")},el_ticket_list_table:function(){b(".el_send_ticket").off().on("click",function(e){e.preventDefault();e=b(this).closest(".el_ticket_action"),e={action:"el_ticket_table_send_ticket",nonce:e.attr("data-nonce"),ticket_id:e.attr("data-ticket-id")};b(".wp-list-table").block({message:null,overlayCSS:{backgroundColor:"#fff",opacity:.3,cursor:"wait"}}),b.post(ajax_object.ajax_url,e,function(e){(e=JSON.parse(e)).mess&&alert(e.mess),b(".wp-list-table").unblock()})}),b(".el_download_ticket").off().on("click",function(e){e.preventDefault();var e=b(this).closest(".el_ticket_action"),a=e.attr("data-nonce"),e=e.attr("data-ticket-id"),e={action:"el_ticket_table_download_ticket",nonce:a,ticket_id:e};b(".wp-list-table").block({message:null,overlayCSS:{backgroundColor:"#fff",opacity:.3,cursor:"wait"}}),b.post(ajax_object.ajax_url,e,function(e){try{var t;"success"===(e=JSON.parse(e)).status?(b("<a />",{href:e.file_url,download:e.file_name,text:"click"}).hide().appendTo("body")[0].click(),t={action:"el_ticket_table_remove_ticket_pdf",nonce:a,file_name:e.file_name},b.post(ajax_object.ajax_url,t,function(e){})):e.mess&&alert(e.mess)}catch(e){alert(e.message)}b(".wp-list-table").unblock()})})},el_remove_seating_map:function(){b(document).off("click",".el_remove_seating_map").on("click",".el_remove_seating_map",function(e){e.preventDefault(),b(this).closest(".el-add-image-wrap").find(".image-wrap").html("")})},el_add_image:function(){b(".el_add_image").off().on("click",function(e){e.preventDefault();var e=wp.media.controller.Library.extend({defaults:_.defaults({id:"insert-image",title:el_admin_object.media_title,allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0,multiple:!1,type:"image"},wp.media.controller.Library.prototype.defaults)}),a=wp.media({button:{text:el_admin_object.media_button},state:"insert-image",states:[new e]});a.on("close",function(){a.state("insert-image").get("selection").length||b(".el-add-image-wrap .image-wrap").html("")}),a.on("select",function(){var o=a.state("insert-image"),e=o.get("selection");e&&(b(".el-add-image-wrap .image-wrap").html(""),e.each(function(e){var a,t,i=o.display(e).toJSON(),n=e.toJSON(),s=n.caption,s=(wp.media.view.settings.captions||delete n.caption,i=wp.media.string.props(i,n),a={id:n.id,post_content:n.description,post_excerpt:s},i.linkUrl&&(a.url=i.linkUrl),"image"===n.type?(t=wp.media.string.image(i),_.each({align:"align",size:"image-size",alt:"image_alt"},function(e,t){i[t]&&(a[e]=i[t])})):"video"===n.type?t=wp.media.string.video(i,n):"audio"===n.type?t=wp.media.string.audio(i,n):(t=wp.media.string.link(i),a.post_title=i.title),e.attributes.nonce=wp.media.view.settings.nonce.sendToEditor,e.attributes.attachment=a,e.attributes.html=t,e.attributes.post_id=wp.media.view.settings.post.id,'<div class="item">'),s=(s=(s=(s+='<img src="'+e.attributes.url+'" class="image" />')+('<input type="hidden" name="'+el_admin_object.prefix+'seating_map" value="'+e.attributes.id+'" />'))+"</div>"+'<a href="#" class="el_remove_seating_map">')+'<span class="dashicons dashicons-no"></span>'+"</a>";b(".el-add-image-wrap .image-wrap").append(s)}))}),a.on("open",function(){var t=a.state("insert-image").get("selection");t.each(function(e){e=wp.media.attachment(e.attributes.id);e.fetch(),t.remove(e?[e]:[])}),b(".el-add-image-wrap").find('input[type="hidden"]').each(function(){var e=b(this);e.val()&&((attachment=wp.media.attachment(e.val())).fetch(),t.add(attachment?[attachment]:[]))})}),a.open()})},el_remove_seat_code_row:function(){b(document).off("click",".remove_seat_code_row").on("click",".remove_seat_code_row",function(e){e.preventDefault();e=b(this).closest(".seat_code_container");const a=e.find(".seat_code_setup").attr("data-ticket"),i=e.find(".seat_code_setup").attr("data-key");e.block({message:null,overlayCSS:{backgroundColor:"#fff",opacity:"0.5"}}),b(this).closest(".setup_item").remove(),e.find(".setup_item").each(function(e,t){b(t).find(".input_code").attr("name",a+"["+i+"][seat_code_setup]["+e+"][code]"),b(t).find(".input_from").attr("name",a+"["+i+"][seat_code_setup]["+e+"][from]"),b(t).find(".input_to").attr("name",a+"["+i+"][seat_code_setup]["+e+"][to]")}),e.unblock()})},el_add_seat_code_row:function(){const s=this;b(document).off("click",".add_seat_code_row").on("click",".add_seat_code_row",function(e){e.preventDefault();const a=b(this).closest(".seat_code_container");var e=a.find(".setup_item").length,t=b(this).attr("data-nonce"),i=a.find(".seat_code_setup").attr("data-ticket"),n=a.find(".seat_code_setup").attr("data-key"),t=(a.block({message:null,overlayCSS:{backgroundColor:"#fff",opacity:"0.5"}}),{action:"el_add_seat_code_row",nonce:t,ticket:i,key:n,items:e});b.ajax({url:ajax_object.ajax_url,data:t,method:"POST",type:"POST",complete:function(e,t){a.unblock()},error:function(e,t,a){console.error(a)},success:function(e){a.find(".seat_code_setup").append(e),s.el_seat_code_validate()}})})},el_seat_code_validate:function(){b(".wrap_seat_list .seat_code_setup .input_code").on("change",function(){let e=b(this).val();e=e.replace(/ /g,""),b(this).val()!=e&&b(this).val(e)})},el_setup_mode_input:function(){b(document).on("change",".setup_mode_input",function(){var e=b(this).val(),t=b(this).closest(".wrap_seat_list");"manually"===e?(t.find(".seat_code_manually").addClass("is-active"),t.find(".seat_code_automatic").removeClass("is-active"),t.find(".seat_code_manually .seat_list").prop("required",!0)):(t.find(".seat_code_automatic").addClass("is-active"),t.find(".seat_code_manually").removeClass("is-active"),t.find(".seat_code_manually .seat_list").prop("required",!1))})},el_add_services:function(){b("#mb_add_services").off().on("click",function(e){e.preventDefault();var e=b(".el_extra_services .el_service_item").length,t=b(this).attr("data-nonce");b.post(ajax_object.ajax_url,{action:"mb_add_services",nonce:t,count_item:e},function(e){b(".el_extra_services").append(e)})})},el_remove_service:function(){b(document).on("click",".el_remove_service",function(){b(this).closest(".el_service_item").remove(),b(".el_extra_services .el_service_item").each(function(n,e){b(e).find('input[name^="ova_mb_event_extra_service"]').each(function(e,t){var a=b(t).attr("name"),i=a.lastIndexOf("["),a=a.slice(i),i="ova_mb_event_extra_service["+n+"]"+a;b(t).attr("name",i)})})})},el_package_setting:function(){if(b('[name="ova_eventlist[package][stripe_active]"]').length){var t=b('[name="ova_eventlist[package][stripe_active]"]'),a=t.val();let e=t.closest("tbody").find("tr:not(:first-child)");"yes"===a?e.fadeIn():e.fadeOut(),t.on("change",function(){"yes"===b(this).val()?e.fadeIn():e.fadeOut()})}if(b('[name="ova_eventlist[package][paypal_active]"]').length){a=b('[name="ova_eventlist[package][paypal_active]"]'),t=a.val();let e=a.closest("tbody").find("tr:not(:first-child)");"yes"===t?e.fadeIn():e.fadeOut(),a.on("change",function(){"yes"===b(this).val()?e.fadeIn():e.fadeOut()})}},el_event_setting_ticket_transfer:function(){var e=b(document).find('input[name="ova_eventlist[ticket_transfer][allow_transfer_ticket]"]');e.length&&(e.is(":checked")?e.closest("tr").siblings().fadeIn():e.closest("tr").siblings().fadeOut(),e.on("change",function(){b(this).is(":checked")?b(this).closest("tr").siblings().fadeIn():b(this).closest("tr").siblings().fadeOut()}))},el_booking_person_type_qty_update:function(){b(document).find("#metabox_Booking .cart .person_type_wrap .person_qty").length&&b(document).find("#metabox_Booking .cart .person_type_wrap .person_qty").each(function(e,t){b(t).on("change",function(){b(t).val()&&parseInt(b(t).val())<0&&b(t).val("0");var a=0;b(t).closest(".person_type_wrap").find(".person_qty").each(function(e,t){b(t).val()&&(t=b(t).val(),a+=parseInt(t))}),b(t).closest(".qty").find(".person_qty_total").val(a)})})},el_event_setting_cron_job:function(){b(document).find("#event_status_first_time").length&&"pass"!=b(document).find("#event_status_first_time").val()&&(b(document).find("#event_status_first_time").closest("table").css("display","none"),b(document).find(".el_setting_update_event_status_manually").css("display","block")),b(document).find("#el_update_event_status").on("click",function(){b(this).attr("disabled",!0),b(this).css("opacity","0.5"),b(document).find(".el_setting_update_event_status_manually .button_group .spinner").addClass("is-active");var e=b(this).attr("data-nonce");EL_Admin.el_update_event_status(e,"")});var e=b(document).find('input[name="ova_eventlist[general][event_cron_job_type]"]');e.each(function(e,t){b(t).is(":checked")&&"manually"==b(t).val()&&(b(t).closest("table").find("tr").last().css("display","none"),b(document).find(".el_setting_update_event_status_manually").css("display","block"))}),e.on("change",function(){"manually"==b(this).filter(":checked").val()?(b(this).closest("table").find("tr").last().css("display","none"),b(document).find(".el_setting_update_event_status_manually").css("display","block")):(b(this).closest("table").find("tr").last().css("display","block"),b(document).find(".el_setting_update_event_status_manually").css("display","none"))})},el_update_event_status:function(t,e=""){b.post(ajax_object.ajax_url,{action:"el_update_event_status",nonce:t,offset:e},function(e){e=JSON.parse(e),b(document).find(".el_setting_update_event_status_manually .event_processing").html(e.mess),"pending"==e.status?EL_Admin.el_update_event_status(t,e.offset):(b(document).find("#el_update_event_status").attr("disabled",!1),b(document).find("#el_update_event_status").css("opacity","1"),b(document).find(".el_setting_update_event_status_manually .button_group .spinner").removeClass("is-active"),"pass"!=b(document).find("#event_status_first_time").val()&&(b(document).find("#event_status_first_time").val("pass"),b(document).find("#event_status_first_time").closest("table").css("display","block")))})},el_choose_event_type:function(){var e;0<b("input[name='ova_mb_event_event_type']").length&&("online"==(e=b("input[name='ova_mb_event_event_type']:checked").val())?(b("#mb_basic #mb_location").hide(),b("body").addClass("online_event")):"classic"==e&&(b("#mb_basic #mb_location").show(),b("body").removeClass("online_event")),b("input[name='ova_mb_event_event_type']").on("click",function(){"online"==(e=b("input[name='ova_mb_event_event_type']:checked").val())?(b("#mb_basic #mb_location").hide(),b("body").addClass("online_event")):"classic"==e&&(b("#mb_basic #mb_location").show(),b("body").removeClass("online_event"))}))},el_input_required:function(){function e(){var e=b('#mb_ticket input[name="ova_mb_event_ticket_link"]:checked').val(),t=b('#mb_ticket input[name="ova_mb_event_seat_option"]:checked').val();"ticket_internal_link"==e&&"map"!=t?b('#mb_ticket input[id="name_ticket"]').prop("required",!0):b('#mb_ticket input[id="name_ticket"]').prop("required",!1)}e(),b('#mb_ticket input[name="ova_mb_event_ticket_link"]').on("change",function(){e()}),b('#mb_ticket input[name="ova_mb_event_seat_option"]').on("change",function(){e()}),b('form[name="post"] #poststuff input[name="save"]').on("click",function(t){"event"==b(this).closest('form[name="post"]').find('input[name="post_type"]').val()&&b(this).closest('form[name="post"]').find('input[id="name_ticket"]').each(function(){var e=b(this);!e.val()&&e.prop("required")&&(e.closest('form[name="post"]').find('a[href="#mb_ticket"]').click(),b("html, body").animate({scrollTop:e.closest('form[name="post"]').find('a[href="#mb_ticket"]').offset().top},1e3,function(){e.focus()}),t.preventDefault())})}),"simple"==b(".wrap_seat_option .seat_option:checked").val()&&b("#mb_ticket .ticket_item").each(function(e,t){"manually"==b(t).find("input.setup_mode_input:checked").val()?b(t).find(".seat_code_manually .seat_list").prop("required",!0):b(t).find(".seat_code_manually .seat_list").prop("required",!1)})},el_choose_link_ticket:function(){var e;0<b("input[name='ova_mb_event_ticket_link']").length&&("ticket_internal_link"==(e=b("input[name='ova_mb_event_ticket_link']:checked").val())?(b("#mb_ticket .ticket_internal_link").show(),b("#mb_ticket .ticket_external_link").hide(),b("#mb_ticket .ticket_external_link_price").hide()):"ticket_external_link"==e&&(b("#mb_ticket .ticket_internal_link").hide(),b("#mb_ticket .ticket_external_link").show(),b("#mb_ticket .ticket_external_link_price").show()),b("input[name='ova_mb_event_ticket_link']").on("click",function(){"ticket_internal_link"==(e=b("input[name='ova_mb_event_ticket_link']:checked").val())?(b("#mb_ticket .ticket_internal_link").show(),b("#mb_ticket .ticket_external_link").hide(),b("#mb_ticket .ticket_external_link_price").hide()):"ticket_external_link"==e&&(b("#mb_ticket .ticket_internal_link").hide(),b("#mb_ticket .ticket_external_link").show(),b("#mb_ticket .ticket_external_link_price").show())}))},el_show_hide_x_day_profit:function(){var e;0<b("#manage_profit").length&&("profit_2"==(e=b("#manage_profit").val())?b(".x_day_profit").closest("tr").hide("slow"):"profit_1"==e&&b(".x_day_profit").closest("tr").show("slow"),b("#manage_profit").change(function(){var e=b("#manage_profit").val();"profit_2"==e?b(".x_day_profit").closest("tr").hide("slow"):"profit_1"==e&&b(".x_day_profit").closest("tr").show("slow")}))},el_enable_cancellation_booking:function(){var e;0<b("input[name='ova_mb_event_allow_cancellation_booking']").length&&("yes"==(e=b("input[name='ova_mb_event_allow_cancellation_booking']:checked").val())?b("#mb_cancel_booking .cancel_bk_before_x_day").show():"no"==e&&b("#mb_cancel_booking .cancel_bk_before_x_day").hide(),b("input[name='ova_mb_event_allow_cancellation_booking']").on("click",function(){"yes"==(e=b("input[name='ova_mb_event_allow_cancellation_booking']:checked").val())?b("#mb_cancel_booking .cancel_bk_before_x_day").show():"no"==e&&b("#mb_cancel_booking .cancel_bk_before_x_day").hide()}))},ova_metabox_booking_checkout_field:function(){var e=b("#el_meta_booking_list_key_checkout_field").val(),t=b("#el_meta_booking_list_key_checkout_field").data("type");if(e)for(var a in e=JSON.parse(e)){var a=e[a],i=t[a];"select"==i?b('.el_booking_detail select[name="'+a+'"]').on("change",function(){var e=b(this).attr("name"),t=b("#bk_data_checkout_field").val(),t=JSON.parse(t),a=b(this).val();t[e]=a,t=JSON.stringify(t),b("#bk_data_checkout_field").val(t)}):"radio"==i?b('.el_booking_detail input[name="'+a+'"]').on("change",function(){var e=b(this).attr("name"),t=b("#bk_data_checkout_field").val(),t=JSON.parse(t),a=b(this).val();t[e]=a,t=JSON.stringify(t),b("#bk_data_checkout_field").val(t)}):"checkbox"==i?b('.el_booking_detail input[data-name="'+a+'"]').on("change",function(){var e=b(this).attr("data-name"),t=b("#bk_data_checkout_field").val(),t=JSON.parse(t),a=[];b(this).closest(".el-checkbox").find('input[data-name="'+e+'"]:checked').each(function(){var e=b(this).val();a.push(e)}),a=a&&b.isArray(a)?a.join(", "):"",t[e]=a,t=JSON.stringify(t),b("#bk_data_checkout_field").val(t)}):"textarea"==i?b('.el_booking_detail textarea[name="'+a+'"]').on("keyup",function(){var e=b(this).attr("name"),t=b("#bk_data_checkout_field").val(),t=JSON.parse(t),a=b(this).val();t[e]=a,t=JSON.stringify(t),b("#bk_data_checkout_field").val(t)}):b('.el_booking_detail input[name="'+a+'"]').on("keyup",function(){var e=b(this).attr("name"),t=b("#bk_data_checkout_field").val(),t=JSON.parse(t),a=b(this).val();t[e]=a,t=JSON.stringify(t),b("#bk_data_checkout_field").val(t)})}},ova_metabox_ticket_checkout_field:function(){var e=b("#el_meta_ticket_list_key_checkout_field").val(),t=b("#el_meta_ticket_list_key_checkout_field").data("type");if(e)for(var a in e=JSON.parse(e)){var a=e[a],i=t[a];"select"==i?b('.el_ticket_detail select[name="'+a+'"]').on("change",function(){var e=b(this).attr("name"),t=b("#bk_data_checkout_field").val(),t=JSON.parse(t),a=b(this).val();t[e]=a,t=JSON.stringify(t),b("#bk_data_checkout_field").val(t)}):"radio"==i?b('.el_ticket_detail input[name="'+a+'"]').on("change",function(){var e=b(this).attr("name"),t=b("#bk_data_checkout_field").val(),t=JSON.parse(t),a=b(this).val();t[e]=a,t=JSON.stringify(t),b("#bk_data_checkout_field").val(t)}):"checkbox"==i?b('.el_ticket_detail input[data-name="'+a+'"]').on("change",function(){var e=b(this).attr("data-name"),t=b("#bk_data_checkout_field").val(),t=JSON.parse(t),a=[];b(this).closest(".el-checkbox").find('input[data-name="'+e+'"]:checked').each(function(){var e=b(this).val();a.push(e)}),a=a&&b.isArray(a)?a.join(", "):"",t[e]=a,t=JSON.stringify(t),b("#bk_data_checkout_field").val(t)}):"textarea"==i?b('.el_ticket_detail textarea[name="'+a+'"]').on("keyup",function(){var e=b(this).attr("name"),t=b("#bk_data_checkout_field").val(),t=JSON.parse(t),a=b(this).val();t[e]=a,t=JSON.stringify(t),b("#bk_data_checkout_field").val(t)}):b('.el_ticket_detail input[name="'+a+'"]').on("keyup",function(){var e=b(this).attr("name"),t=b("#bk_data_checkout_field").val(),t=JSON.parse(t),a=b(this).val();t[e]=a,t=JSON.stringify(t),b("#bk_data_checkout_field").val(t)})}},ova_checkout_field:function(){b(".el-sortable").sortable();var n="",s=(n=(n=(n=(n+="<tr>")+'<td><input type="text" name="ova_options_key[]" placeholder="Option Value" /></td>'+'<td><input type="text" name="ova_options_text[]" placeholder="Option Text" /></td>')+'<td class="ova-box"><a href="javascript:void(0)" class="ovabrw_addfield btn btn-blue" title="Add new option">+</a></td>'+'<td class="ova-box"><a href="javascript:void(0)" class="ovabrw_remove_row btn btn-red" title="Remove option">x</a></td>')+'<td class="ova-box sort"><span class="dashicons dashicons-menu" title="Drag & Drop"></span></td>'+"</tr>",b(document).on("click",".ovabrw_addfield",function(e){var t=b(this).closest("table"),a=t.find("tbody tr").size(),i=(i=b(".ova-wrap-popup-ckf").attr("height"))?parseInt(i)+5:110;b(".ova-wrap-popup-ckf").attr("height",i),b(".ova-wrap-popup-ckf").css("height",i+"vh"),0<a?t.find("tbody tr:last").after(n):t.find("tbody").append(n)}),b(document).on("click",".ovabrw_remove_row",function(e){var t=b(this).closest("table");b(this).closest("tr").remove(),0==t.find("tbody tr").size()&&t.find("tbody").append(n)}),""),o=(s=(s=(s=(s+="<tr>")+'<td><input type="text" name="ova_radio_key[]" placeholder="Option Value" /></td>'+'<td><input type="text" name="ova_radio_text[]" placeholder="Option Text" /></td>')+'<td class="ova-box"><a href="javascript:void(0)" class="el_add_radio btn btn-blue" title="Add new option">+</a></td>'+'<td class="ova-box"><a href="javascript:void(0)" class="el_remove_radio btn btn-red" title="Remove option">x</a></td>')+'<td class="ova-box sort"><span class="dashicons dashicons-menu" title="Drag & Drop"></span></td>'+"</tr>",b(document).on("click",".el_add_radio",function(e){var t=b(this).closest("table"),a=t.find("tbody tr").size(),i=(i=b(".ova-wrap-popup-ckf").attr("height"))?parseInt(i)+5:110;b(".ova-wrap-popup-ckf").attr("height",i),b(".ova-wrap-popup-ckf").css("height",i+"vh"),0<a?t.find("tbody tr:last").after(s):t.find("tbody").append(s)}),b(document).on("click",".el_remove_radio",function(e){var t=b(this).closest("table");b(this).closest("tr").remove(),0==t.find("tbody tr").size()&&t.find("tbody").append(s)}),"");o+='<tr><td><input type="text" name="ova_checkbox_key[]" placeholder="Option Value" /></td><td><input type="text" name="ova_checkbox_text[]" placeholder="Option Text" /></td><td class="ova-box"><a href="javascript:void(0)" class="el_add_checkbox btn btn-blue" title="Add new option">+</a></td><td class="ova-box"><a href="javascript:void(0)" class="el_remove_checkbox btn btn-red" title="Remove option">x</a></td><td class="ova-box sort"><span class="dashicons dashicons-menu" title="Drag & Drop"></span></td></tr>',b(document).on("click",".el_add_checkbox",function(e){var t=b(this).closest("table"),a=t.find("tbody tr").size(),i=(i=b(".ova-wrap-popup-ckf").attr("height"))?parseInt(i)+5:110;b(".ova-wrap-popup-ckf").attr("height",i),b(".ova-wrap-popup-ckf").css("height",i+"vh"),0<a?t.find("tbody tr:last").after(o):t.find("tbody").append(o)}),b(document).on("click",".el_remove_checkbox",function(e){var t=b(this).closest("table");b(this).closest("tr").remove(),0==t.find("tbody tr").size()&&t.find("tbody").append(o)}),b(".ovabrw_edit_field_form").on("click",function(e){var t=b(this).data("data_edit"),a=t.name,i=t.type||"text",n=t.label,s=t.placeholder,o=t.default,c=t.max_file_size,_=t.class,l=t.required,d=t.ova_options_key,r=t.ova_options_text,p=t.ova_radio_key,m=t.ova_radio_text,u=t.ova_checkbox_key,f=t.ova_checkbox_text,v=(b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.ova-row-default").css("display","table-row"),"select"==i||"radio"==i||"checkbox"==i?b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.ova-row-placeholder").css("display","none"):b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.ova-row-placeholder").css("display","table-row"),""),h=("select"===i?(b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.row-options table.ova-sub-table tbody").empty(),b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.row-options").css("display","table-row"),d.forEach(function(e,t){v=(v=v+'<tr><td><input type="text" name="ova_options_key[]" placeholder="Option Value" value="'+e+'" /></td>')+'<td><input type="text" name="ova_options_text[]" placeholder="Option Text" value="'+r[t]+'" /></td><td class="ova-box"><a href="javascript:void(0)"  class="ovabrw_addfield btn btn-blue" title="Add new option">+</a></td><td class="ova-box"><a href="javascript:void(0)" class="ovabrw_remove_row btn btn-red" title="Remove option">x</a></td><td class="ova-box sort"><span class="dashicons dashicons-menu" title="Drag & Drop"></span></td></tr>'}),b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.row-options table.ova-sub-table tbody").append(v)):b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.row-options").css("display","none"),""),k=("radio"===i?(b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.row-radio table.ova-sub-table tbody").empty(),b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.row-radio").css("display","table-row"),p.forEach(function(e,t){h=(h=h+'<tr><td><input type="text" name="ova_radio_key[]" placeholder="Option Value" value="'+e+'" /></td>')+'<td><input type="text" name="ova_radio_text[]" placeholder="Option Text" value="'+m[t]+'" /></td><td class="ova-box"><a href="javascript:void(0)" class="el_add_radio btn btn-blue" title="Add new option">+</a></td><td class="ova-box"><a href="javascript:void(0)" class="el_remove_radio btn btn-red" title="Remove option">x</a></td><td class="ova-box sort"><span class="dashicons dashicons-menu" title="Drag & Drop"></span></td></tr>'}),b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.row-radio table.ova-sub-table tbody").append(h)):b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.row-radio").css("display","none"),"");"checkbox"===i?(b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.row-checkbox table.ova-sub-table tbody").empty(),b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.row-checkbox").css("display","table-row"),u.forEach(function(e,t){k=(k=k+'<tr><td><input type="text" name="ova_checkbox_key[]" placeholder="Option Value" value="'+e+'" /></td>')+'<td><input type="text" name="ova_checkbox_text[]" placeholder="Option Text" value="'+f[t]+'" /></td><td class="ova-box"><a href="javascript:void(0)" class="el_add_checkbox btn btn-blue" title="Add new option">+</a></td><td class="ova-box"><a href="javascript:void(0)" class="el_remove_checkbox btn btn-red" title="Remove option">x</a></td><td class="ova-box sort"><span class="dashicons dashicons-menu" title="Drag & Drop"></span></td></tr>'}),b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.row-checkbox table.ova-sub-table tbody").append(k)):b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.row-checkbox").css("display","none"),("file"===i?(b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.ova-row-type .file-format").css("display","inline-block"),b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.max-file-size").css("display","table-row"),b('.ova-wrap-popup-ckf .ova-popup-wrapper tr.max-file-size input[name="max_file_size"]').val(c),b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.ova-row-placeholder").css("display","none"),b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.ova-row-default")):(b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.ova-row-type .file-format").css("display","none"),b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.max-file-size"))).css("display","none"),"on"==l?b('.ova-wrap-popup-ckf .ova-popup-wrapper tr.row-required input[name="required"]').prop("checked"):b('.ova-wrap-popup-ckf .ova-popup-wrapper tr.row-required input[name="required"]').prop("checked",!1),b('#ova_popup_field_form input[name="ova_action"]').val("edit"),b('#ova_popup_field_form input[name="ova_old_name"]').val(a),b("#ova_type").val(i),b("#ova_popup_field_form .ova-row-name input").val(a),b("#ova_popup_field_form .ova-row-label input").val(n),b("#ova_popup_field_form .ova-row-placeholder input").val(s),b("#ova_popup_field_form .ova-row-default input").val(o),b("#ova_popup_field_form .ova-row-class input").val(_),b(".ova-wrap-popup-ckf").css("display","block")}),b("#ovabrw_openform").on("click",function(e){b('#ova_popup_field_form input[name="ova_action"]').val("new"),b('#ova_popup_field_form input[name="ova_old_name"]').val(""),b(".ova-wrap-popup-ckf").css("display","block"),b("#ova_type").val("text"),b('.ova-wrap-popup-ckf input[name="name"]').val(""),b('.ova-wrap-popup-ckf input[name="label"]').val(""),b('.ova-wrap-popup-ckf input[name="placeholder"]').val(""),b('.ova-wrap-popup-ckf input[name="default"]').val(""),b(".ova-wrap-popup-ckf .row-options .el-sortable").html(`
                    <tr>
                        <td><input type="text" name="ova_options_key[]" placeholder="Option Value" /></td>
                        <td><input type="text" name="ova_options_text[]" placeholder="Option Text" /></td>
                        <td class="ova-box"><a href="javascript:void(0)" class="ovabrw_addfield btn btn-blue" title="Add new option">+</a></td>
                        <td class="ova-box"><a href="javascript:void(0)" class="ovabrw_remove_row btn btn-red" title="Remove option">x</a></td>
                        <td class="ova-box sort">
                            <span class="dashicons dashicons-menu" title="Drag & Drop"></span>
                        </td>
                    </tr>`),b(".ova-wrap-popup-ckf .row-radio .el-sortable").html(`
                    <tr>
                        <td><input type="text" name="ova_radio_key[]" placeholder="Option Value" /></td>
                        <td><input type="text" name="ova_radio_text[]" placeholder="Option Text" /></td>
                        <td class="ova-box"><a href="javascript:void(0)" class="el_add_radio btn btn-blue" title="Add new option">+</a></td>
                        <td class="ova-box"><a href="javascript:void(0)" class="el_remove_radio btn btn-red" title="Remove option">x</a></td>
                        <td class="ova-box sort">
                            <span class="dashicons dashicons-menu" title="Drag & Drop"></span>
                        </td>
                    </tr>`),b(".ova-wrap-popup-ckf .row-checkbox .el-sortable").html(`
                    <tr>
                        <td><input type="text" name="ova_checkbox_key[]" placeholder="Option Value" /></td>
                        <td><input type="text" name="ova_checkbox_text[]" placeholder="Option Text" /></td>
                        <td class="ova-box"><a href="javascript:void(0)" class="el_add_checkbox btn btn-blue" title="Add new option">+</a></td>
                        <td class="ova-box"><a href="javascript:void(0)" class="el_remove_checkbox btn btn-red" title="Remove option">x</a></td>
                        <td class="ova-box sort">
                            <span class="dashicons dashicons-menu" title="Drag & Drop"></span>
                        </td>
                    </tr>`),b(".ova-wrap-popup-ckf .row-options").css("display","none"),b(".ova-wrap-popup-ckf .row-radio").css("display","none"),b(".ova-wrap-popup-ckf tr.ova-row-placeholder").css("display","table-row"),b(".ova-wrap-popup-ckf tr.ova-row-default").css("display","table-row"),b(".ova-wrap-popup-ckf .row-checkbox").css("display","none"),b(".ova-wrap-popup-ckf .ova-row-type .file-format").css("display","none"),b(".ova-wrap-popup-ckf .max-file-size").css("display","none")}),b("#ovabrw_manage_custom_checkout_field").on("change",function(){b(".ovabrw_product_custom_checkout_field_field").css("display","block"),"all"==b(this).val()&&b(".ovabrw_product_custom_checkout_field_field").css("display","none")}),b("#ova_type").on("change",function(){b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.row-options").css("display","none"),b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.row-radio").css("display","none"),b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.row-checkbox").css("display","none"),b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.ova-row-placeholder").css("display","table-row"),"select"==b(this).val()&&(b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.row-options").css("display","table-row"),b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.ova-row-placeholder").css("display","none")),"radio"==b(this).val()&&(b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.row-radio").css("display","table-row"),b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.ova-row-placeholder").css("display","none")),"checkbox"==b(this).val()&&(b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.row-checkbox").css("display","table-row"),b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.ova-row-placeholder").css("display","none")),"file"==b(this).val()?(b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.ova-row-type .file-format").css("display","inline-block"),b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.max-file-size").css("display","table-row"),b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.ova-row-placeholder").css("display","none"),b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.ova-row-default").css("display","none")):(b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.ova-row-type .file-format").css("display","none"),b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.max-file-size").css("display","none"),b(".ova-wrap-popup-ckf .ova-popup-wrapper tr.ova-row-default").css("display","table-row"))}),b("#ovabrw_select_all_field").on("click",function(e){var t=jQuery(this).prop("checked");b(".ova-list-checkout-field table tbody tr td.ova-checkbox input").prop("checked",t)}),b("#ovabrw_close_popup").on("click",function(e){b(".ova-wrap-popup-ckf").css("display","none")}),b(".ova-list-checkout-field .ova_remove").on("click",function(e){confirm("Are you sure?")||e.preventDefault()})},update_status_proccess:function(){b(".update-pay-profit").off().on("click",function(){if(!confirm("Are you sure change status?"))return!1;var t=b(this),e=t.attr("data-id"),a=t.attr("data-status"),i=t.attr("data-nonce");t.siblings(".submit-load-more").css("z-index",1),b.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"update_status_proccess",nonce_update_pay_profit:i,id_event:e,status:a},success:function(e){"success"==e&&t.parent(".button-load-ova").siblings(".text").text(a),t.parent(".button-load-ova").css("display","none"),b(".submit-load-more").css("z-index",-1)}})})},create_ticket_send_mail:function(){b(".create-ticket-send-mail").off().on("click",function(e){e.preventDefault();var t=b(this),e=t.attr("data-id-booking"),a=t.attr("data-nonce");t.siblings(".submit-load-more.sendmail").css({"z-index":"1"}),t.siblings(".mb-loading").css({display:"inline-flex"}),b.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"create_ticket_send_mail",el_create_send_ticket_nonce:a,id_booking:e},success:function(e){e=JSON.parse(e);b(".el_booking_detail .status").css("display","none"),"success"==e.status?b(".success").text(e.message).css({display:"block",color:"#28a745"}):(e.status="error",b(".error").text(e.message).css({display:"block",color:"#dc3545"})),t.siblings(".submit-load-more.sendmail").css({"z-index":"-1"}),t.siblings(".mb-loading").css({display:"none"})}})})},download_ticket:function(){b(".download-ticket").off().on("click",function(e){e.preventDefault();var e=b(this).attr("data-id-booking"),t=b(this).attr("data-nonce");b(this).siblings(".submit-load-more.dowload-ticket").css({"z-index":"1"}),b.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"download_ticket",el_download_ticket_nonce:t,id_booking:e},success:function(e){var e=JSON.parse(e),t=e.list_url_ticket;"error"==e.status?(b(".download-ticket").siblings(".submit-load-more.dowload-ticket").css({"z-index":"-1"}),b(".submit-load-more.sendmail").css({"z-index":"-1"}),b(".error").text(e.message).css({display:"block",color:"#dc3545"})):(t.map(function(e){var t=document.createElement("a"),e=(t.href=e).slice(e.lastIndexOf("/")+1);t.download=e,t.dispatchEvent(new MouseEvent("click")),b(".submit-load-more.dowload-ticket").css({"z-index":"-1"})}),b.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"unlink_download_ticket",data_url:t},success:function(e){}}))}})})},admin_setting_tab:function(){if(b(document).find(".ova_el_settings_wrapper").length){const n=new URLSearchParams(window.location.search);b(document).on("click",".ova_el_settings_wrapper .nav-tab-wrapper a",function(e){e.preventDefault();var e=b(this),t=e.closest(".ova_el_settings_wrapper").find(".ova_el_wrapper_content").data("edit-url"),a=e.data("tab"),t=(n.set("tab",a),n.delete("group"),window.history.replaceState(null,null,"?"+n.toString()),b(".ova_el_settings_wrapper .nav-tab-wrapper a").removeClass("nav-tab-active"),e.addClass("nav-tab-active"),b(".ova_el_settings_wrapper .ova_el_wrapper_content > div").hide(),b(".ova_el_settings_wrapper .ova_el_wrapper_content #"+a).fadeIn(),b(".ova_el_settings_wrapper .ova_el_wrapper_content #"+a).find(".el_tab_group").removeClass("active"),b(".ova_el_settings_wrapper .ova_el_wrapper_content #"+a).find(".el_tab_group_content").removeClass("active"),b(".ova_el_settings_wrapper .ova_el_wrapper_content #"+a).find(".el_tab_group").each(function(e){0==e&&(b(this).addClass("active"),e=b(this).attr("id"),b(this).closest(".el-tab").find('.el_tab_group_content[data-tab-id="'+e+'"]').addClass("active"))}),t+"?page=ova_el_setting&settings-updated=true&tab="+a);e.closest('form[name="ova_el_options"]').find('input[name="_wp_http_referer"]').val(t)}),b(document).on("click",".ova_el_settings_wrapper .ova_el_wrapper_content .el_tab_group",function(e){e.preventDefault();var e=b(this),t=e.closest(".ova_el_settings_wrapper").find(".ova_el_wrapper_content").data("edit-url"),a=e.attr("id"),i=e.closest(".el-tab").attr("id"),t=(n.set("tab",i),n.set("group",a),window.history.replaceState(null,null,"?"+n.toString()),e.closest(".el-tab").find(".el_tab_group").removeClass("active"),e.closest(".el-tab").find(".el_tab_group_content").removeClass("active"),e.addClass("active"),e.closest(".el-tab").find('.el_tab_group_content[data-tab-id="'+a+'"]').addClass("active"),t+"?page=ova_el_setting&tab="+i+"&group="+a+"&settings-updated=true");e.closest('form[name="ova_el_options"]').find('input[name="_wp_http_referer"]').val(t)})}},gallery_image:function(){var s;function t(){b("#mb_gallery #gallery-metabox-list li").each(function(e){b(this).find("input:hidden").attr("name","ova_mb_event_gallery["+e+"]")})}function a(){b("#mb_gallery #gallery-metabox-list").sortable({opacity:.6,stop:function(){t()}})}b(document).on("click","#mb_gallery a.gallery-add",function(e){e.preventDefault();var i=b(this),n=b("#gallery-metabox-list").attr("data-remove-image");s&&s.close(),(s=wp.media.frames.file_frame=wp.media({title:b(this).data("uploader-title"),button:{text:b(this).data("uploader-button-text")},multiple:!0})).on("open",function(){var t=s.state().get("selection"),e=i.closest("#mb_gallery").find("#gallery-metabox-list input"),a=[];0<e.length&&e.each(function(e,t){b(t).val()&&a.push(b(t).val())}),0<a.length&&a.forEach(function(e){e=wp.media.attachment(e);e.fetch(),t.add(e?[e]:[])})}),s.on("select",function(){selection=s.state().get("selection"),b("#gallery-metabox-list").html(""),selection.map(function(e,t){var a=(a=(a=(a="")+"<li>"+('<input type="hidden" name="ova_mb_event_gallery['+t+']" value="'+(e=e.toJSON()).id+'">'))+('<img class="image-preview" src="'+e.url+'">'))+('<small><a class="remove-image" href="#">'+n+"</a></small>")+"</li>";b("#gallery-metabox-list").append(a)})}),a(),s.open()}),a(),b(document).on("click","#mb_gallery a.remove-image",function(e){e.preventDefault(),b(this).parents("li").animate({opacity:0},200,function(){b(this).remove(),t()})})},edit_full_address:function(){b(document).find("#edit_full_address").change(function(){b(this).prop("checked")?(b(this).val("checked"),b(this).parents(".edit_address").find(".address").removeClass("readonly"),b(this).parents(".edit_address").find(".address").removeAttr("readonly")):(b(this).val(""),b(this).parents(".edit_address").find(".address").attr("readonly","readonly").addClass("readonly"))})},map:function(){function i(e,t){var a="",e=e.filter(e=>e.types.some(e=>e===t));return a=null!=e&&0<e.length?e[0]?.long_name||e[0]?.longText:a}var e,t;window.event_map=async function(e,t){var e={lat:e,lng:t},[{},{}]=await Promise.all([google.maps.importLibrary("marker"),google.maps.importLibrary("places")]),t=(map=new google.maps.Map(document.getElementById("admin_show_map"),{center:e,zoom:13,mapId:"EVENT_MAP",mapTypeControl:!1}),new google.maps.places.PlaceAutocompleteElement),a=(t.id="place-autocomplete-input",t.locationBias=e,document.getElementById("place-autocomplete-card"));a.appendChild(t),map.controls[google.maps.ControlPosition.TOP_LEFT].push(a),marker=new google.maps.marker.AdvancedMarkerElement({map:map,position:e,gmpDraggable:!0,title:"This marker is draggable."}),infoWindow=new google.maps.InfoWindow({}),marker.addListener("dragend",e=>{var t=marker.position;infoWindow.close(),infoWindow.setContent(`Pin dropped at: ${t.lat}, `+t.lng),infoWindow.open(marker.map,marker),b("#map_lat").val(t.lat),b("#map_lng").val(t.lng),t=t,(geocoder=new google.maps.Geocoder).geocode({latLng:t},function(e,t){t==google.maps.GeocoderStatus.OK&&(t=e[0].formatted_address,i(e=e[0].address_components,"postal_code"),i(e,"country"),i(e,"administrative_area_level_1"),i(e,"administrative_area_level_2"),b("#address").val(t),b("#pac-input").val(t))})}),t.addEventListener("gmp-select",async({placePrediction:e})=>{var t,e=e.toPlace(),a=(await e.fetchFields({fields:["displayName","formattedAddress","location"]}),e.viewport?map.fitBounds(e.viewport):(map.setCenter(e.location),map.setZoom(17)),'<div id="infowindow-content"><span id="place-displayname" class="title">'+e.displayName+'</span><br /><span id="place-address">'+e.formattedAddress+"</span></div>");b("#map_lat").val(e.location.lat),b("#map_lng").val(e.location.lng),b("#pac-input").val(e.displayName),b("#address").val(e.formattedAddress),t=e.location,infoWindow.setContent(a),infoWindow.setPosition(t),infoWindow.open({map:map,anchor:marker,shouldFocus:!1}),marker.position=e.location})},0<b("#admin_show_map").length&&(e=b("#map_lat").val()?parseFloat(b("#map_lat").val()):parseFloat(el_google_obj.lat),t=b("#map_lng").val()?parseFloat(b("#map_lng").val()):parseFloat(el_google_obj.lng),event_map(e,t))},el_load_venue:function(){function i(e){return e.split(/,\s*/)}function n(){b(document).find(".remove_venue").on("click",function(e){e.preventDefault(),b(this).parent().remove()})}b("#add_venue").autocomplete({source:function(e,t){e=i(e.term).pop();b.ajax({url:ajax_object.ajax_url,type:"POST",dataType:"json",data:{action:"el_load_venue",keyword:e},success:function(e){t(e)}})},select:function(e,t){var a=i(b("#add_venue").val());return a.pop(),a.push(t.item.label),a.push(""),b("#add_venue").val(a.join(", ")),!1},delay:0}),b(".check_venue").on("click",function(e){e.preventDefault();var t=b(this),e=t.closest("#mb_venue").find("#add_venue").val(),a=[];t.closest("#mb_venue").find("#data_venue li").each(function(){a=a+b(this).find("span").html()+", "}),b.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"el_load_checklist_venue",add_venue:e,list_venue:a},success:function(e){t.closest("#mb_venue").find("#data_venue").html(e),t.closest("#mb_venue").find("#add_venue").val(""),n()}})}),n()},contact:function(){var e=b("#info_organizer"),t=b(".prefix").val();function a(){b("#social_list .social_item").each(function(e){b(this).find(".link_social").attr("name",t+"social_organizer["+e+"][link_social]"),b(this).find(".icon_social").attr("name",t+"social_organizer["+e+"][icon_social]")})}"checked"==e.attr("checked")&&b("#show_rewrite").css("display","block"),e.change(function(){1==b(this).prop("checked")?(b(this).val("checked"),b("#show_rewrite").css("display","block")):(b(this).val(""),b(this).removeAttr("checked"),b("#show_rewrite").css("display","none"))}),b("#social_organizer .add_social").on("click",function(e){e.preventDefault();e=b("#social_list .social_item").length;b.post(ajax_object.ajax_url,{action:"mb_add_social",data:{index:e}},function(e){b("#social_list").append(e),a(),b("#social_list").sortable({opacity:.6,stop:function(){a()}})})}),b(document).on("click","#social_organizer .remove_social",function(e){e.preventDefault(),b(this).parents(".social_item").animate({opacity:0},200,function(){b(this).remove(),a()})})},date_time_picker:function(){b().datepicker&&b(".event_start_date, .event_end_date, .calendar_date, .calendar_end_date, .calendar_start_date, .coupon_start_date, .coupon_end_date, .start_ticket_date, .close_ticket_date, .disable_date .start_date, .disable_date .end_date, .start_ticket_date_map, .close_ticket_date_map, .date_cal, .disable_time_slot .start_date, .disable_time_slot .end_date, .seat_start_date, .seat_end_date, .area_start_date, .area_end_date").each(function(){var e=b(this).attr("data-format"),t=b(this).data("firstday");b(this).datepicker({dateFormat:e,firstDay:t,changeMonth:!0,changeYear:!0,minDate:0})}),b().datepicker&&b(".range_datepicker.to, .range_datepicker.from").each(function(){var e=b(this).attr("data-format"),t=b(this).data("firstday");b(this).datepicker({dateFormat:e,firstDay:t,changeMonth:!0,changeYear:!0})}),b().datepicker&&b(".range_datepicker_2.to, .range_datepicker_2.from").each(function(){var e=b(this).attr("data-format"),t=b(this).data("firstday");b(this).datepicker({dateFormat:e,firstDay:t,changeMonth:!0,changeYear:!0})}),b().timepicker&&b(".event_start_time, .event_end_time, .calendar_start_time, .calendar_end_time, .calendar_recurrence_start_time, .calendar_recurrence_end_time, .coupon_start_time, .coupon_end_time, .start_ticket_time, .close_ticket_time, .start_ticket_time_map, .close_ticket_time_map, .disable_time_slot .start_time, .disable_time_slot .end_time, .seat_start_time, .seat_end_time, .area_start_time, .area_end_time").each(function(){var e;e="12"==b(this).attr("data-time")?"hh:mm p":"HH:mm",b(this).on("keypress",function(e){e.preventDefault()}),b(this).timepicker({timeFormat:e,interval:15,dynamic:!1,dropdown:!0,scrollbar:!0})}),b().timepicker&&b(".schedules_time .start_time,.schedules_time .end_time").each(function(){var e;e="12"==b(this).attr("data-time")?"hh:mm p":"HH:mm",b(this).timepicker({timeFormat:e,interval:15,dynamic:!1,dropdown:!0,scrollbar:!0,change:function(){var e=b(this).closest(".item_schedules_time").find(".start_time").val(),t=b(this).closest(".item_schedules_time").find(".end_time").val(),a=b(this).closest(".item_schedules_time").attr("data-key");b(".wrap_disable_date .item_disable_date").each(function(){a==b(this).find('option[value="'+a+'"]').val()&&(b(this).find('option[value="'+a+'"]').html(e+"-"+t),0<b(".vendor_edit_event").length)&&b(this).find("select").select2()})}})})},radio_single_banner:function(){b(".single_banner").on("click",function(){var e=b(this).val();"gallery"==e||"video"==e?b(this).closest(".wrap_single_banner").find(".wrap_image_banner").css("display","none"):b(this).closest(".wrap_single_banner").find(".wrap_image_banner").css("display","block")})},image_banner:function(){b(".add_image_banner").on("click",function(e){e.preventDefault();var t=b(this),a=wp.media({title:b(this).data("uploader-title"),button:{text:b(this).data("uploader-button-text")},multiple:!1});a.on("select",function(e){e=a.state().get("selection").first().toJSON(),t.parent().find("input").val(e.id),t.parent().find(".content_image").html('<img class="image-preview-banner" src="'+e.sizes.full.url+'" alt="image banner" style="max-height: 200px;"><button class="button remove_image_banner">Remove</button> ')}),a.open()}),b(document).on("click",".remove_image_banner",function(e){e.preventDefault(),b(this).closest(".image_banner").find("input").val(""),b(this).parent().empty()})},add_image_ticket:function(){var i,n;b(document).on("click","#mb_ticket .add_image_ticket",function(e){e.preventDefault();var a=b(this);return i&&i.close(),(i=wp.media.frames.file_frame=wp.media({multiple:!1})).on("open",function(){var e=i.state().get("selection"),t=a.find("input.image_ticket").val();t&&((t=wp.media.attachment(t)).fetch(),e.add(t?[t]:[]))}),i.on("select",function(){var t=a.parent().data("index");i.state().get("selection").map(function(e){e=e.toJSON(),b(a).html('<input type="hidden" name="ova_mb_event_ticket['+t+'][image_ticket]" class="image_ticket" value="'+e.id+'"><img class="image-preview-ticket" src="'+e.url+'" alt="image ticket">'),b(a).parent().find(".remove_image_ticket").html("<span>x</span>")})}),i.open(a),!1}),b(document).on("click","#mb_ticket .add_seat_map_ticket",function(e){e.preventDefault();var a=b(this);return n&&n.close(),(n=wp.media.frames.imageFrame=wp.media({multiple:!1})).on("open",function(){var e=n.state().get("selection"),t=a.find("input#seat_map_ticket").val();t&&((t=wp.media.attachment(t)).fetch(),e.add(t?[t]:[]))}),n.on("select",function(){var t=a.parent().data("index");n.state().get("selection").map(function(e){(e=e.toJSON()).sizes.el_thumbnail?b(a).html('<input type="hidden" name="ova_mb_event_ticket['+t+'][seat_map_ticket]" class="seat_map_ticket" value="'+e.id+'"><img class="image-preview-ticket" src="'+e.sizes.el_thumbnail.url+'" alt="Image ticket map">'):b(a).html('<input type="hidden" name="ova_mb_event_ticket['+t+'][seat_map_ticket]" class="seat_map_ticket" value="'+e.id+'"><img class="image-preview-ticket" src="'+e.sizes.full.url+'" alt="Image ticket map">'),b(a).parent().find(".remove_seat_map_ticket").html("<span>x</span>")})}),n.open(a),!1})},add_image_ticket_map:function(){var a;b(document).on("click","#mb_ticket .add_image_ticket_map",function(e){e.preventDefault();var t=b(this);return a&&a.close(),(a=wp.media.frames.file_frame=wp.media({multiple:!1})).on("select",function(){(selection=a.state().get("selection")).map(function(e){(e=e.toJSON()).sizes.el_thumbnail?b(t).html('<input type="hidden" name="ova_mb_event_ticket_map[image_ticket]" class="image_ticket_map" value="'+e.id+'"><img class="image-preview-ticket" src="'+e.sizes.el_thumbnail.url+'" alt="image ticket">'):b(t).html('<input type="hidden" name="ova_mb_event_ticket_map[image_ticket]" class="image_ticket_map" value="'+e.id+'"><img class="image-preview-ticket" src="'+e.sizes.full.url+'" alt="image ticket">'),b(t).parent().find(".remove_image_ticket_map").html("<span>x</span>")})}),a.open(t),!1})},remove_image_ticket_map:function(){b(document).on("click",".remove_image_ticket_map",function(e){e.preventDefault();e=confirm("Are you sure?");b(this).parent().data("index");return 1==e&&(b(this).empty(),b(this).parent().find(".add_image_ticket_map").html('<i class="icon_plus_alt2"></i>Add ticket logo (.jpg, .png)<br><span>Recommended size: 130x50px</span>')),!1})},radio_seat_option:function(){b(".seat_option").on("click",function(){"map"==(val=b(this).val())?(b(this).parents("#mb_ticket").find(".ticket_none_simple").css("display","none"),b(this).parents("#mb_ticket").find(".ticket_map").css("display","block"),b(this).parents("#mb_ticket").find(".add_ticket").css("display","none"),b(".seating_map_wrapper").removeClass("is-active"),b("#mb_ticket .ticket_item").each(function(e,t){b(t).find(".seat_code_manually .seat_list").prop("required",!1)})):(b(this).parents("#mb_ticket").find(".add_ticket").css("display","block"),b(this).parents("#mb_ticket").find(".ticket_none_simple").css("display","block"),b(this).parents("#mb_ticket").find(".ticket_map").css("display","none"),"simple"==val?(b(".wrap_seat_list").addClass("is-active"),b(".col_total_number_ticket").removeClass("is-active"),b(this).parents("#mb_ticket").find(".wrap_setup_seat").css("display","flex"),b(this).parents("#mb_ticket").find(".seat_map_ticket").css("display","flex"),b(".seating_map_wrapper").addClass("is-active"),b("#mb_ticket .ticket_item").each(function(e,t){"manually"==b(t).find("input.setup_mode_input:checked").val()?b(t).find(".seat_code_manually .seat_list").prop("required",!0):b(t).find(".seat_code_manually .seat_list").prop("required",!1)})):(b(".wrap_seat_list").removeClass("is-active"),b(".col_total_number_ticket").addClass("is-active"),b(this).parents("#mb_ticket").find(".wrap_setup_seat").css("display","none"),b(this).parents("#mb_ticket").find(".seat_map_ticket").css("display","none"),b(".seating_map_wrapper").removeClass("is-active"),b("#mb_ticket .ticket_item").each(function(e,t){b(t).find(".seat_code_manually .seat_list").prop("required",!1)}))),b(this).parents("#mb_ticket").find(".add_ticket").attr("data-seat_option",val)})},radio_type_price:function(){b(document).find(".type_price").on("change",function(){b(this).closest(".col_price_ticket").find(".price_ticket").prop("disabled",!1),b(this).closest(".col_price_ticket").find(".price_ticket").css("display","block"),"free"==b(this).val()&&(b(this).closest(".col_price_ticket").find(".price_ticket").prop("disabled",!0),b(this).closest(".col_price_ticket").find(".price_ticket").val("0"))})},remove_image_ticket:function(){b(document).on("click",".remove_image_ticket",function(e){e.preventDefault();e=confirm("Are you sure?");b(this).parent().data("index");return 1==e&&(b(this).empty(),b(this).parent().find(".add_image_ticket").html('<i class="icon_plus_alt2"></i>Add ticket logo (.jpg, .png)<br><span>Recommended size: 130x50px</span>')),!1}),b(document).on("click",".remove_seat_map_ticket",function(e){e.preventDefault();e=confirm("Are you sure?");b(this).parent().data("index");return 1==e&&(b(this).empty(),b(this).parent().find(".add_seat_map_ticket").html('<i class="icon_plus_alt2"></i>Add image (.jpg, .png)')),!1})},color_picker_ticket:function(){0<b(".color_ticket").length&&b(".color_ticket").wpColorPicker(),0<b(".color_label_ticket").length&&b(".color_label_ticket").wpColorPicker(),0<b(".color_content_ticket").length&&b(".color_content_ticket").wpColorPicker(),0<b(".map_color_type_seat").length&&b(".map_color_type_seat").wpColorPicker(),0<b(".color_label_ticket_map").length&&b(".color_label_ticket_map").wpColorPicker(),0<b(".color_ticket_map").length&&b(".color_ticket_map").wpColorPicker(),0<b(".color_content_ticket_map").length&&b(".color_content_ticket_map").wpColorPicker()},toggle_ticket:function(){b(document).on("click","#mb_ticket .edit_ticket, #mb_ticket .save_ticket",function(e){e.preventDefault(),b(this).closest(".ticket_item").find(".content_ticket").toggle(),"none"==b(this).closest(".ticket_item").find(".content_ticket").css("display")?b(this).closest(".ticket_item").find(".heading_ticket").css("border-radius","10px"):b(this).closest(".ticket_item").find(".heading_ticket").css("border-radius","10px 10px 0 0")}),b(document).find('a[href="#mb_ticket"]').on("click",function(){b(this).closest("#tabs, .content").find(".content_ticket").css("display","none"),"none"==b(this).closest("#tabs, .content").find(".content_ticket").css("display")?b(this).closest("#tabs, .content").find(".heading_ticket").css("border-radius","10px"):b(this).closest("#tabs, .content").find(".heading_ticket").css("border-radius","10px 10px 0 0")})},add_ticket:function(){b(document).on("click","#mb_ticket .add_ticket",function(e){e.preventDefault();var t=b(this),e=(t.find(".submit-load-more").css("z-index","9"),EL_Admin.radio_seat_option(),EL_Admin.count_tickets()),a=b(this).data("event_id"),i=b(document).find('input[name="ova_mb_event_seat_option"]:checked').val();b.post(ajax_object.ajax_url,{action:"mb_add_ticket",data:{event_id:a,count_tickets:e,seat_option:i}},function(e){t.find(".submit-load-more").css("z-index","-1"),b("#mb_ticket .ticket_none_simple").append(e),EL_Admin.radio_type_price(),EL_Admin.color_picker_ticket(),EL_Admin.date_time_picker(),EL_Admin.repair_key_ticket(),EL_Admin.el_input_required(),EL_Admin.el_admin_validate_price_tiket()})})},add_seat_map:function(){function a(){b(document).off("click",".remove_seat_map").on("click",".remove_seat_map",function(e){e.preventDefault(),b(this).closest(".item_seat").remove(),i()})}function i(){var t=0;b("#mb_ticket .item_seat").each(function(){var e=b(this).data("prefix");b(this).find(".map_name_seat").attr("name",e+"ticket_map[seat]["+t+"][id]"),b(this).find(".map_price_seat").attr("name",e+"ticket_map[seat]["+t+"][price]"),b(this).find(".select_type_seat").attr("name",e+"ticket_map[seat]["+t+"][type_seat]"),b(this).find(".seat_start_date").attr("name",e+"ticket_map[seat]["+t+"][start_date]"),b(this).find(".seat_start_time").attr("name",e+"ticket_map[seat]["+t+"][start_time]"),b(this).find(".seat_end_date").attr("name",e+"ticket_map[seat]["+t+"][end_date]"),b(this).find(".seat_end_time").attr("name",e+"ticket_map[seat]["+t+"][end_time]"),t++})}b("#mb_ticket .add_seat_map").on("click",function(e){e.preventDefault();var t=b(this),e=(t.find(".submit-load-more").css("z-index","9"),EL_Admin.radio_seat_option(),b(document).find("#mb_ticket .item_seat").length);b.post(ajax_object.ajax_url,{action:"add_seat_map",data:{count_seat:e}},function(e){t.find(".submit-load-more").css("z-index","-1"),b("#mb_ticket .wrap_seat_map").append(e),t.closest(".vendor_edit_event").find(".wrap_seat_map select").each(function(){var e;0==b(this).siblings("span.select2").length&&(e=b(this).data("default"),b(this).select2({allowClear:!0,placeholder:e}))}),a(),i(),EL_Admin.update_type_seat(),EL_Admin.date_time_picker(),EL_Admin.person_type_seat_field_load(),EL_Admin.data_person_seat_price_load()})}),a()},add_area_map:function(){function a(){b(document).off("click",".remove_area_map").on("click",".remove_area_map",function(e){e.preventDefault(),b(this).closest(".item_area").remove(),i()})}function i(){var t=0;b("#mb_ticket .item_area").each(function(){var e=b(this).data("prefix");b(this).find(".map_name_area").attr("name",e+"ticket_map[area]["+t+"][id]"),b(this).find(".map_price_area").attr("name",e+"ticket_map[area]["+t+"][price]"),b(this).find(".map_qty_area").attr("name",e+"ticket_map[area]["+t+"][qty]"),b(this).find(".select_type_area").attr("name",e+"ticket_map[area]["+t+"][type_seat]"),b(this).find(".area_start_date").attr("name",e+"ticket_map[area]["+t+"][start_date]"),b(this).find(".area_start_time").attr("name",e+"ticket_map[area]["+t+"][start_time]"),b(this).find(".area_end_date").attr("name",e+"ticket_map[area]["+t+"][end_date]"),b(this).find(".area_end_time").attr("name",e+"ticket_map[area]["+t+"][end_time]"),t++})}b("#mb_ticket .add_area_map").on("click",function(e){e.preventDefault();var t=b(this),e=(t.find(".submit-load-more").css("z-index","9"),EL_Admin.radio_seat_option(),b(document).find("#mb_ticket .item_area").length);b.post(ajax_object.ajax_url,{action:"add_area_map",data:{count_area:e}},function(e){t.find(".submit-load-more").css("z-index","-1"),b("#mb_ticket .wrap_area_map").append(e),t.closest(".vendor_edit_event").find(".wrap_area_map select").each(function(){var e;0==b(this).siblings("span.select2").length&&(e=b(this).data("default"),b(this).select2({allowClear:!0,placeholder:e}))}),a(),i(),EL_Admin.update_type_seat(),EL_Admin.date_time_picker(),EL_Admin.person_type_field_load(),EL_Admin.data_person_price_load()})}),a()},person_type_field_load:function(){if(b(document).find(".person_type_wrapper #data_person_type").length){var e=b(document).find(".person_type_wrapper #data_person_type").val(),e=JSON.parse(e),t=b(document).find(".wrap_desc_seat_map").attr("data-currency"),a=b(document).find(".wrap_desc_seat_map").attr("data-label");if(b(document).find(".item_area .person_type_field").remove(),Object.keys(e).length){b(document).find(".item_area .price_area_map").fadeOut(),b(document).find(".item_area .price_area_map .map_price_area").val("");for(const n in e){var i=e[n];b(document).find(".item_area .qty_area_map").before(`<div class="person_type_field ${n}">
                            <label>${i} (${a} ${t}):</label>
                            <input type="number" class="input_person_price" required value="" min="0" step="0.1" />
                            </div>`)}}else b(document).find(".item_area .price_area_map").fadeIn()}},data_person_price_load:function(){b(document).find(".item_area").each(function(e,t){var a=b(t).find('input[class="person_price"]').val();!function(e){try{JSON.parse(e)}catch(e){return}return 1}(a)||(a=JSON.parse(a),b(t).find(".person_type_field input").each(function(e,t){a[e]&&b(t).val(a[e])})),b(t).find(".person_type_field input").on("change",function(){var a=[];b(t).find(".person_type_field input").each(function(e,t){a.push(b(t).val())}),b(t).find('input[class="person_price"]').val(""),b(t).find('input[class="person_price"]').val(JSON.stringify(a))})})},data_person_price_change:function(){b(document).find(".item_area").each(function(e,t){var a=[];b(t).find(".person_type_field input").each(function(e,t){a.push(b(t).val())}),b(t).find('input[class="person_price"]').val(""),b(t).find('input[class="person_price"]').val(JSON.stringify(a))})},add_person_type:function(){function n(){var i={};b(document).find('.person_type_wrapper input[class="person_type"]').each(function(e,t){var t=b(t).val(),a=t.toLowerCase();(a=a.split(" ").join("_"))&&t&&(i[a]=t)}),b(document).find(".person_type_wrapper #data_person_type").val(JSON.stringify(i))}function e(){b(document).find(".person_type_wrapper .remove_person_type").on("click",function(){b(this).closest(".item").remove(),n(),EL_Admin.person_type_field_load(),EL_Admin.data_person_price_load(),EL_Admin.data_person_price_change()})}function t(){var e=b(document).find('.person_type_wrapper input[class="person_type"]');const i=new RegExp("[^a-zA-Z0-9 ]+");e.each(function(e,a){b(a).keyup(function(){var e=b(a).val(),t=e.replace(i,"");e!=t&&b(a).val(t)}).change(function(){var t=(t=b(a).val()).trim();if(($new_val=t)!=$new_val){b(a).val($new_val);let e=$new_val.toLowerCase();e=e.split(" ").join("_"),b(a).attr("data-slug",e)}else{let e=t.toLowerCase();e=e.split(" ").join("_"),b(a).attr("data-slug",e)}n(),EL_Admin.person_type_field_load(),EL_Admin.data_person_price_load(),EL_Admin.data_person_price_change()})})}var a,i;b(document).find(".person_type_wrapper").length&&(a=b(document).find(".person_type_wrapper .add_person_type"),i=b(document).find(".person_type_wrapper .person_type_list"),a.on("click",function(){i.append(`<li class="item">
                                        <input type="text" class="person_type" onpaste="return false;">
                                        <button type="button" class="button remove_person_type">x</button>
                                    </li>`),t(),e(),EL_Admin.data_person_price_change()})),t(),e(),n(),EL_Admin.person_type_field_load(),EL_Admin.data_person_price_load()},add_pertype_seat:function(){function n(){var i={};b(document).find('.person_type_seat_wrap input[class="pertype_seat"]').each(function(e,t){var t=b(t).val(),a=t.toLowerCase();(a=a.split(" ").join("_"))&&t&&(i[a]=t)}),b(document).find(".person_type_seat_wrap #person_type_seat_data").val(JSON.stringify(i))}function t(){var e=b(document).find('.person_type_seat_wrap input[class="pertype_seat"]');const i=new RegExp("[^a-zA-Z0-9 ]+");e.each(function(e,a){b(a).keyup(function(){var e=b(a).val(),t=e.replace(i,"");e!=t&&b(a).val(t)}).change(function(){var t=(t=b(a).val()).trim();if(($new_val=t)!=$new_val){b(a).val($new_val);let e=$new_val.toLowerCase();e=e.split(" ").join("_"),b(a).attr("data-slug",e)}else{let e=t.toLowerCase();e=e.split(" ").join("_"),b(a).attr("data-slug",e)}n(),EL_Admin.person_type_seat_field_load(),EL_Admin.data_person_seat_price_load(),EL_Admin.data_person_seat_price_change()})})}function a(){b(document).find(".person_type_seat_wrap .remove_pertype_seat").on("click",function(){b(this).closest(".item").remove(),n(),EL_Admin.person_type_seat_field_load(),EL_Admin.data_person_seat_price_load(),EL_Admin.data_person_seat_price_change()})}b(document).find(".person_type_seat_wrap").length&&b(document).find(".person_type_seat_wrap .add_pertype_seat").off().on("click",function(e){e.preventDefault(),b(document).find(".person_type_seat_wrap .person_type_seat").append(`<li class="item">
                                        <input type="text" class="pertype_seat" onpaste="return false;" required />
                                        <button type="button" class="button remove_pertype_seat">x</button>
                                    </li>`),t(),a(),EL_Admin.data_person_seat_price_change()}),t(),a(),n(),EL_Admin.person_type_seat_field_load(),EL_Admin.data_person_seat_price_load()},data_person_seat_price_change:function(){b(document).find(".item_seat").each(function(e,t){var a=[];b(t).find(".person_type_field input").each(function(e,t){a.push(b(t).val())}),b(t).find('input[class="person_price"]').val(""),b(t).find('input[class="person_price"]').val(JSON.stringify(a))})},data_person_seat_price_load:function(){b(document).find(".item_seat").each(function(e,t){var a=b(t).find('input[class="person_price"]').val();!function(e){try{JSON.parse(e)}catch(e){return}return 1}(a)||(a=JSON.parse(a),b(t).find(".person_type_field input").each(function(e,t){a[e]&&b(t).val(a[e])})),b(t).find(".person_type_field input").on("change",function(){var a=[];b(t).find(".person_type_field input").each(function(e,t){a.push(b(t).val())}),b(t).find('input[class="person_price"]').val(""),b(t).find('input[class="person_price"]').val(JSON.stringify(a))})})},person_type_seat_field_load:function(){if(b(document).find(".person_type_seat_wrap #person_type_seat_data").length){var e=b(document).find(".person_type_seat_wrap #person_type_seat_data").val(),e=JSON.parse(e),t=b(document).find(".wrap_desc_seat_map").attr("data-currency"),a=b(document).find(".wrap_desc_seat_map").attr("data-label");if(b(document).find(".item_seat .person_type_field").remove(),Object.keys(e).length){b(document).find(".item_seat .price_seat_map").fadeOut(),b(document).find(".item_seat .price_seat_map .map_price_seat").val("");for(const n in e){var i=e[n];b(document).find(".item_seat .type_seat_map").before(`<div class="person_type_field ${n}">
                            <label>${i} (${a} ${t}):</label>
                            <input type="number" class="input_person_price" required value="" min="0" step="0.1" />
                            </div>`)}}else b(document).find(".item_seat .price_seat_map").fadeIn()}},add_desc_seat_map:function(){function a(){b(document).off("click",".remove_desc_seat_map").on("click",".remove_desc_seat_map",function(e){e.preventDefault(),b(this).closest(".item_desc_seat").remove(),i(),EL_Admin.update_type_seat()})}function i(){var t=0;b("#mb_ticket .item_desc_seat").each(function(){var e=b(this).data("prefix");b(this).find(".map_type_seat").attr("name",e+"ticket_map[desc_seat]["+t+"][map_type_seat]"),b(this).find(".map_price_type_seat").attr("name",e+"ticket_map[desc_seat]["+t+"][map_price_type_seat]"),b(this).find(".map_desc_type_seat").attr("name",e+"ticket_map[desc_seat]["+t+"][map_desc_type_seat]"),b(this).find(".map_color_type_seat").attr("name",e+"ticket_map[desc_seat]["+t+"][map_color_type_seat]"),t++})}function n(){b("#mb_ticket .wrap_desc_seat_map input.map_type_seat").on("blur",function(){EL_Admin.update_type_seat()})}b("#mb_ticket .add_desc_seat_map").on("click",function(e){e.preventDefault();var t=b(this),e=(t.find(".submit-load-more").css("z-index","9"),EL_Admin.radio_seat_option(),b(document).find("#mb_ticket .item_desc_seat").length);b.post(ajax_object.ajax_url,{action:"add_desc_seat_map",data:{count_seat:e}},function(e){t.find(".submit-load-more").css("z-index","-1"),b("#mb_ticket .wrap_desc_seat_map").append(e),a(),i(),n(),EL_Admin.color_picker_ticket()})}),a(),n()},type_map_change:function(){b("#mb_ticket .type_map li").off().on("click",function(e){e.preventDefault(),b(this).closest(".type_map").find("li").removeClass("active"),b(this).addClass("active"),"seat"===b(this).data("type")&&(b(this).closest(".container_seat_map").find(".wrap_area_map").hide(),b(this).closest(".container_seat_map").find("button.add_area_map").hide(),b(this).closest(".container_seat_map").find(".wrap_seat_map").show(),b(this).closest(".container_seat_map").find("button.add_seat_map").show()),"area"===b(this).data("type")&&(b(this).closest(".container_seat_map").find(".wrap_seat_map").hide(),b(this).closest(".container_seat_map").find("button.add_seat_map").hide(),b(this).closest(".container_seat_map").find(".wrap_area_map").show(),b(this).closest(".container_seat_map").find("button.add_area_map").show())})},update_type_seat:function(){var t=[];b("#mb_ticket .wrap_desc_seat_map input.map_type_seat").each(function(){b(this).val()&&t.push(b(this).val())}),b("#mb_ticket .wrap_seat_map select.select_type_seat").each(function(){var e=b(this),a=e.val(),i='<option value="">'+e.data("default")+"</option>";0<t.length&&b.each(t,function(e,t){i+=t===a?'<option value="'+t+'" selected="selected">'+t+"</option>":'<option value="'+t+'">'+t+"</option>"}),e.html("").append(i)}),b("#mb_ticket .wrap_area_map select.select_type_area").each(function(){var e=b(this),a=e.val(),i='<option value="">'+e.data("default")+"</option>";0<t.length&&b.each(t,function(e,t){i+=t===a?'<option value="'+t+'" selected="selected">'+t+"</option>":'<option value="'+t+'">'+t+"</option>"}),e.html("").append(i)})},mobileAndTabletCheck:function(){let e=!1;var t;return t=navigator.userAgent||navigator.vendor||window.opera,e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))?!0:e},sortable_ticket:function(){EL_Admin.mobileAndTabletCheck()||b("#mb_ticket .ticket_internal_link .wrap .ticket_none_simple").sortable({stop:function(e,t){EL_Admin.repair_key_ticket()}}),b("#mb_ticket .ticket_internal_link .wrap .ticket_none_simple .radio_type_price").on("change",function(){var e=b(this).find("input#type_price:checked").val();b(this).attr("data-type-price",e)}),b("#mb_ticket .ticket_internal_link .wrap .ticket_none_simple .wrap_setup_seat").on("change",function(){var e=b(this).find("input#setup_seat:checked").val();b(this).attr("data-setup-seat",e)})},count_tickets:function(){return b("#mb_ticket .ticket_item").length},repair_key_ticket:function(){EL_Admin.count_tickets();var a=0;b("#mb_ticket .ticket_item").each(function(){var e,t=b(this).data("prefix");b(this).find("#ticket_id").attr("name",t+"ticket["+a+"][ticket_id]"),b(this).find("#name_ticket").attr("name",t+"ticket["+a+"][name_ticket]"),b(this).find(".type_price").attr("name",t+"ticket["+a+"][type_price]"),b(this).find("input#type_price:checked").val()||(e=b(this).find(".radio_type_price").data("type-price"),b(this).find('input#type_price[value="'+e+'"]').prop("checked",!0)),b(this).find("#price_ticket").attr("name",t+"ticket["+a+"][price_ticket]"),b(this).find("#number_total_ticket").attr("name",t+"ticket["+a+"][number_total_ticket]"),b(this).find("#number_min_ticket").attr("name",t+"ticket["+a+"][number_min_ticket]"),b(this).find("#number_max_ticket").attr("name",t+"ticket["+a+"][number_max_ticket]"),b(this).find(".start_ticket_date").attr("name",t+"ticket["+a+"][start_ticket_date]"),b(this).find("#start_ticket_time").attr("name",t+"ticket["+a+"][start_ticket_time]"),b(this).find(".close_ticket_date").attr("name",t+"ticket["+a+"][close_ticket_date]"),b(this).find("#close_ticket_time").attr("name",t+"ticket["+a+"][close_ticket_time]"),b(this).find("#color_ticket").attr("name",t+"ticket["+a+"][color_ticket]"),b(this).find("#color_label_ticket").attr("name",t+"ticket["+a+"][color_label_ticket]"),b(this).find("#color_content_ticket").attr("name",t+"ticket["+a+"][color_content_ticket]"),b(this).find("#desc_ticket").attr("name",t+"ticket["+a+"][desc_ticket]"),b(this).find("#private_desc_ticket").attr("name",t+"ticket["+a+"][private_desc_ticket]"),b(this).find("#seat_list").attr("name",t+"ticket["+a+"][seat_list]"),b(this).find("#image_ticket").attr("name",t+"ticket["+a+"][image_ticket]"),b(this).find(".image_ticket").attr("data-index",a),b(this).find(".setup_seat").attr("name",t+"ticket["+a+"][setup_seat]"),b(this).find("input#setup_seat:checked").val()||(e=b(this).find(".wrap_setup_seat").data("setup-seat"),b(this).find('input#setup_seat[value="'+e+'"]').prop("checked",!0)),b(this).find("#seat_map_ticket").attr("name",t+"ticket["+a+"][seat_map_ticket]"),b(this).find(".image_ticket_seat_map").attr("data-index",a),a++}),EL_Admin.radio_checked_ticket()},radio_checked_ticket:function(){b("#mb_ticket .ticket_item").find("input:radio:checked").each(function(){b(this).attr("data-checked","true"),b(this).prop("checked",!0),b(this).trigger("click")})},remove_ticket:function(){b(document).on("click",".delete_ticket",function(){b(this).closest(".ticket_item").remove(),EL_Admin.repair_key_ticket()})},calendar:function(){function a(){var e=0;b(".calendar .item_calendar").each(function(){b(this).find(".calendar_id").attr("name","ova_mb_event_calendar["+e+"][calendar_id]"),b(this).find(".calendar_date").attr("name","ova_mb_event_calendar["+e+"][date]"),b(this).find(".calendar_end_date").attr("name","ova_mb_event_calendar["+e+"][end_date]"),b(this).find(".calendar_start_time").attr("name","ova_mb_event_calendar["+e+"][start_time]"),b(this).find(".calendar_end_time").attr("name","ova_mb_event_calendar["+e+"][end_time]"),b(this).find(".number_time_book_before").attr("name","ova_mb_event_calendar["+e+"][book_before_minutes]"),e++})}function i(){0<b(".list_calendar").length&&767.98<b(window).width()&&b(".list_calendar").sortable({opacity:.6,stop:function(){a()}})}function e(){b(".interval-desc").hide();var e="-plural",e=(1!=b("input#recurrence-interval").val()&&""!=b("input#recurrence-interval").val()||(e="-singular"),"span#interval-"+b("select#recurrence-frequency").val()+e);b(e).show()}function t(){b(".alternate-selector").hide(),b("#"+b("select#recurrence-frequency").val()+"-selector").show(),b("#"+b("select#recurrence-frequency").val()+"-selector").css("display","inline-block")}b(".calendar .add_calendar").on("click",function(e){e.preventDefault();var t=b(this),e=t.parent().find(".item_calendar").length;t.find(".submit-load-more").css("z-index","9"),b.post(ajax_object.ajax_url,{action:"mb_add_calendar",data:{index:e}},function(e){t.find(".submit-load-more").css("z-index","-1"),b(".list_calendar").append(e),a(),i(),EL_Admin.date_time_picker()})}),a(),b(document).on("click",".calendar .remove_calendar",function(e){e.preventDefault(),b(this).parent().animate({opacity:0},200,function(){b(this).remove(),a()})}),i(),b(document).find(".option_calendar input").click(function(){var e=b(this).val();"auto"!==e?(b(this).closest(".calendar").find(".manual").css("display","block"),b(this).closest(".calendar").find(".auto").css("display","none"),b(this).closest(".calendar").find(".calendar_recurrence_start_time, .calendar_recurrence_end_time, .calendar_start_date, .calendar_end_date,.schedules_time .start_time,.schedules_time .end_time").removeAttr("required"),b(this).closest(".calendar").find(".calendar_date, .end_date .calendar_end_date, .calendar_start_time, .calendar_end_time").attr("required","required")):(b(this).closest(".calendar").find(".manual").css("display","none"),b(this).closest(".calendar").find(".auto").css("display","block"),b(this).closest(".calendar").find(".calendar_recurrence_start_time, .calendar_recurrence_end_time, .calendar_start_date, .calendar_end_date,.schedules_time .start_time,.schedules_time .end_time").attr("required","required"),b(this).closest(".calendar").find(".calendar_date, .end_date .calendar_end_date, .calendar_start_time, .calendar_end_time").removeAttr("required")),"auto"==e&&0<b(this).closest(".calendar").find(".schedules_time .start_time").length&&b(this).closest(".calendar").find(".calendar_recurrence_start_time, .calendar_recurrence_end_time").removeAttr("required")}),e(),t(),b("input#recurrence-interval").keyup(e),b("select#recurrence-frequency").change(e),b("select#recurrence-frequency").change(t),b(".disable_date .add_disable_date").click(function(e){e.preventDefault();var t=b(this),e=t.parents(".disable_date").find(".item_disable_date").length,a=[];t.parents("#mb_calendar").find(".item_schedules_time").each(function(){var e={start_time:b(this).find(".start_time").val(),end_time:b(this).find(".end_time").val()};a.push(e)}),t.find(".submit-load-more").css("z-index","9"),b.post(ajax_object.ajax_url,{action:"mb_add_disable_date",data:{index:e,schedules_time:a}},function(e){t.find(".submit-load-more").css("z-index","-1"),b(".wrap_disable_date").append(e),EL_Admin.date_time_picker(),0<b(".vendor_edit_event").length&&b(".wrap_disable_date").find(".item_disable_date").last().find(".schedules_time").select2()})}),b(document).on("click",".disable_date .remove_disable_date",function(e){e.preventDefault(),b(this).parents(".item_disable_date").animate({opacity:0},200,function(){var e;b(this).remove(),e=0,b(".calendar .item_disable_date").each(function(){b(this).find(".start_date").attr("name","ova_mb_event_disable_date["+e+"][start_date]"),b(this).find(".end_date").attr("name","ova_mb_event_disable_date["+e+"][end_date]"),b(this).find(".schedules_time").attr("name","ova_mb_event_disable_date["+e+"][schedules_time]"),e++})})}),b(".schedules_time .add_schedules_time").click(function(e){e.preventDefault();var n=b(this),e=n.parents(".schedules_time").find(".item_schedules_time").length;n.closest("#mb_calendar").find(".calendar_recurrence_start_time,.calendar_recurrence_end_time").removeAttr("required"),n.closest("#mb_calendar").find(".time-range").hide(),b(".wrap_disable_date .item_disable_date").each(function(){b(this).find(".disable_time").show()}),n.find(".submit-load-more").css("z-index","9"),b.post(ajax_object.ajax_url,{action:"mb_add_schedules_time",data:{index:e}},function(e){n.find(".submit-load-more").css("z-index","-1"),b(".wrap_schedules_time").append(e),EL_Admin.date_time_picker();var t=b(".wrap_schedules_time .item_schedules_time").last().find(".start_time").val(),a=b(".wrap_schedules_time .item_schedules_time").last().find(".end_time").val(),i=b(".wrap_schedules_time .item_schedules_time").last().attr("data-key");b(".wrap_disable_date .item_disable_date").each(function(){b(this).find("select").append("<option value = "+i+">"+t+"-"+a+"</option>")})})}),b(document).on("click",".schedules_time .remove_schedules_time",function(e){e.preventDefault(),b(this).closest(".calendar").find("input[name='ova_mb_event_schedules_time[1][start_time]']").length<=0&&(b(this).closest(".calendar").find(".time-range").show(),b(this).closest(".calendar").find(".time-range .calendar_recurrence_start_time").attr("required","required"),b(this).closest(".calendar").find(".time-range .calendar_recurrence_end_time").attr("required","required"),b(".wrap_disable_date .item_disable_date").each(function(){b(this).find(".disable_time").hide()}));var t=b(this).parents(".item_schedules_time").attr("data-key");b(".wrap_disable_date .item_disable_date").each(function(){t==b(this).find('option[value="'+t+'"]').val()&&(b(this).find('option[value="'+t+'"]').remove(),0<b(".vendor_edit_event").length)&&b(this).find("select").select2();var e=-1;b(this).find("select option").each(function(){b(this).attr("value",e),e++})}),b(this).parents(".item_schedules_time").animate({opacity:0},200,function(){var e;b(this).remove(),e=0,b(".calendar .item_schedules_time").each(function(){b(this).find(".start_time").attr("name","ova_mb_event_schedules_time["+e+"][start_time]"),b(this).find(".end_time").attr("name","ova_mb_event_schedules_time["+e+"][end_time]"),b(this).find(".schedules_time_book_before").attr("name","ova_mb_event_schedules_time["+e+"][book_before]"),b(this).attr("data-key",e),e++})})}),b(".disable_time_slot .add_disable_time_slot").click(function(e){e.preventDefault();var t=b(this),e=t.parents(".disable_time_slot").find(".item_disable_time_slot").length,a=(t.find(".submit-load-more").css("z-index","9"),t.closest(".disable_time_slot").find(".wrap_disable_time_slot"));b.post(ajax_object.ajax_url,{action:"mb_add_disable_time_slot",data:{index:e}},function(e){t.find(".submit-load-more").css("z-index","-1"),a.append(e),EL_Admin.date_time_picker()})}),b(document).on("click",".disable_time_slot .remove_disable_time_slot",function(e){e.preventDefault(),b(this).parents(".item_disable_time_slot").animate({opacity:0},200,function(){var e;b(this).remove(),e=0,b(".calendar .item_disable_time_slot").each(function(){b(this).find(".start_date").attr("name","ova_mb_event_disable_date_time_slot["+e+"][start_date]"),b(this).find(".end_date").attr("name","ova_mb_event_disable_date_time_slot["+e+"][end_date]"),b(this).find(".start_time").attr("name","ova_mb_event_disable_date_time_slot["+e+"][start_time]"),b(this).find(".end_time").attr("name","ova_mb_event_disable_date_time_slot["+e+"][end_time]"),e++})})})},coupon:function(){function i(){var t=0;b(".coupon .item_coupon").each(function(){b(this).find(".coupon_id").attr("name","ova_mb_event_coupon["+t+"][coupon_id]"),b(this).find(".discount_code").attr("name","ova_mb_event_coupon["+t+"][discount_code]"),b(this).find(".discount_amout_number").attr("name","ova_mb_event_coupon["+t+"][discount_amout_number]"),b(this).find(".discount_amount_percent").attr("name","ova_mb_event_coupon["+t+"][discount_amount_percent]"),b(this).find(".coupon_start_date").attr("name","ova_mb_event_coupon["+t+"][start_date]"),b(this).find(".coupon_end_date").attr("name","ova_mb_event_coupon["+t+"][end_date]"),b(this).find(".coupon_start_time").attr("name","ova_mb_event_coupon["+t+"][start_time]"),b(this).find(".coupon_end_time").attr("name","ova_mb_event_coupon["+t+"][end_time]"),b(this).find(".coupon_all_ticket").attr("name","ova_mb_event_coupon["+t+"][all_ticket]"),b(this).find(".coupon_quantity").attr("name","ova_mb_event_coupon["+t+"][quantity]");var e=0;b(this).find(".item_ticket").each(function(){b(this).find(".list_ticket").attr("name","ova_mb_event_coupon["+t+"][list_ticket]["+e+"]"),e++}),t++})}function n(){0<b(".list_coupon").length&&767.98<b(window).width()&&b(".list_coupon").sortable({opacity:.6,stop:function(){i()}})}function s(){b(document).find(".coupon_all_ticket").change(function(){this.checked;b(this).closest(".number_coupon_ticket").find(".item_ticket input").prop("checked",this.checked)})}function o(){b(document).find(".number_coupon_ticket .item_ticket input").change(function(){b(this).prop("checked")?b(this).attr("checked","checked"):b(this).removeAttr("checked"),b(this).closest(".wrap_list_ticket").find(".item_ticket").length==b(this).closest(".wrap_list_ticket").find("input:checked").length?(b(this).closest(".number_coupon_ticket").find(".coupon_all_ticket").val("checked"),b(this).closest(".number_coupon_ticket").find(".coupon_all_ticket").attr("checked","checked")):(b(this).closest(".number_coupon_ticket").find(".coupon_all_ticket").val(""),b(this).closest(".number_coupon_ticket").find(".coupon_all_ticket").removeAttr("checked"))})}b(".coupon .add_coupon").on("click",function(e){e.preventDefault();var t=b(this),e=t.parent().find(".item_coupon").length,a=t.data("post_id");t.find(".submit-load-more").css("z-index","9"),b.post(ajax_object.ajax_url,{action:"mb_add_coupon",data:{index:e,post_id:a}},function(e){t.find(".submit-load-more").css("z-index","-1"),b(".list_coupon").append(e),i(),n(),EL_Admin.date_time_picker(),s(),o()})}),i(),b(document).on("click",".coupon .remove_coupon",function(e){e.preventDefault(),b(this).parent().animate({opacity:0},200,function(){b(this).remove(),i()})}),n(),s(),o(),b(document).find(".item_coupon").each(function(){var e=b(this).find(".number_coupon_ticket .item_ticket");e.find("input").length==e.find("input:checked").length?(e.closest(".number_coupon_ticket").find(".coupon_all_ticket").val("checked"),e.closest(".number_coupon_ticket").find(".coupon_all_ticket").attr("checked","checked")):(e.closest(".number_coupon_ticket").find(".coupon_all_ticket").val(""),e.closest(".number_coupon_ticket").find(".coupon_all_ticket").removeAttr("checked"))})},add_image_category:function(){b(document).on("click",".term-image-wrap .gallery-add",function(e){let t=b(this),a;e.preventDefault(),(a=wp.media.frames.file_frame=wp.media({title:t.data("uploader-title"),button:{text:t.data("uploader-button-text")},multiple:!1})).on("select",function(){(attachment=a.state().get("selection").first().toJSON()).sizes.el_img_rec?b(t).parent().find(".wrap_image_cat").html('<input type="hidden" name="_category_image" class="image_category" value="'+attachment.id+'"><img class="image-preview" src="'+attachment.sizes.el_img_rec.url+'" alt="Banner Category"><small><a class="remove-image" href="#">Remove image</a></small>'):b(t).parent().find(".wrap_image_cat").html('<input type="hidden" name="_category_image" class="image_category" value="'+attachment.id+'"><img class="image-preview" src="'+attachment.sizes.full.url+'" alt="Banner Category"><small><a class="remove-image" href="#">Remove image</a></small>')}),a.open()})},remove_image_category:function(){b(document).on("click",".wrap_image_cat .remove-image",function(e){var t=b(this);e.preventDefault(),t.parents(".wrap_image_cat").html('<input type="hidden" name="_category_image" class="image_category" value=""><img class="image-preview" src="" alt="">')})},add_ckf_for_category:function(){function e(){var e=b(document).find('input[name="_category_ckf_type"]:checked');"all"===e.val()?e.closest(".custom-checkout-field-wrap").find("select, .select2, .description").hide():(e.closest(".custom-checkout-field-wrap").find("select, .select2, .description").css("display","inline-block"),b('select[name="_category_checkout_field[]"]').each(function(){0<b(this).length&&b(this).select2({allowClear:!0,placeholder:b(this).data("placeholder")})}))}e(),b(document).find('input[name="_category_ckf_type"]').on("change",function(){e()})},add_custom_booking:function(){b(".el_booking_detail .cart-total a").on("click",function(e){e.preventDefault();var e=b(this),t=e.parents(".el_booking_detail").find(".seat_option_type").val(),e=e.parents(".el_booking_detail").find('input[name="ova_event_id"]').val(),a=b(document).find(".el_booking_detail .cart-item").length;b.post(ajax_object.ajax_url,{action:"add_custom_booking",data:{type_seat:t,index:a,event_id:e}},function(e){b(".el_booking_detail .cart tbody").append(e)})}),b(document).on("click",".el_booking_detail .delete_item",function(e){var t=b(this);e.preventDefault(),t.parents(".cart-item").remove()}),b(document).on("change",".el_booking_detail .id_event",function(e){var t=b(this).val(),a=b(".el_booking_detail .id_cal").data("id_cal");e.preventDefault(),b.post(ajax_object.ajax_url,{action:"el_get_idcal_seatopt",data:{id_event:t,id_cal:a}},function(e){b(".el_booking_detail .id_cal").html(e);var e=b(".el_booking_detail .seat_option").val(),t=(b(".el_booking_detail .seat_option_type").val(e),b(".el_booking_detail .cart tbody").html(""),"");"none"==e||"simple"==e?t='<tr><th class="name">'+b(".el_booking_detail .detail_booking_head_cart").data("name")+'</th><th class="qty">'+b(".el_booking_detail .detail_booking_head_cart").data("qty")+'</th><th class="sub-total">'+b(".el_booking_detail .detail_booking_head_cart").data("sub_total")+"</th></tr>":"map"==e&&(t="<tr><th>"+b(".el_booking_detail .detail_booking_head_cart").data("name")+"</th><th>"+b(".el_booking_detail .detail_booking_head_cart").data("sub_total")+"</th></tr>"),b(".el_booking_detail .cart thead").html(t)})})},el_datepicker:function(){b().datepicker&&(b(".membership_date").each(function(){var e=b(this).attr("data-format"),t=b(this).data("firstday");b(this).datepicker({dateFormat:e,firstDay:t,changeMonth:!0,changeYear:!0})}),b("input.el-ticket-edit-date, input.el-ticket-date").each(function(){var e=b(this).data("date-format"),t=b(this).data("first-day");b(this).datepicker({dateFormat:e,firstDay:t,changeMonth:!0,changeYear:!0})}))},el_check_book_before_minutes:function(){b(".number_time_book_before").on("change",function(){var e=b(this).val(),t=b(this).closest(".item_calendar").find(".calendar_date").val(),a=b(this).closest(".item_calendar").find(".calendar_end_date").val(),i=b(this).closest(".item_calendar").find(".calendar_start_time").val(),n=b(this).closest(".item_calendar").find(".calendar_end_time").val();b.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"el_check_book_before_minutes",number_time:e,date:t,end_date:a,start_time:i,end_time:n},success:function(e){e=JSON.parse(e);if(e.msg)return alert(e.msg),!1}})})},el_check_schedules_time_book:function(){b(".schedules_time_book").on("change",function(){var e=b(this).val(),t=b(this).closest(".item_schedules_time").find(".start_time").val(),a=b(this).closest(".item_schedules_time").find(".end_time").val();b.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"el_check_schedules_time_book",number_time:e,start_time:t,end_time:a},success:function(e){e=JSON.parse(e);if(e.msg)return alert(e.msg),!1}})})},el_check_calendar_recurrence_time_book:function(){b(".calendar_recurrence_time_book_before").on("change",function(){var e=b(this).val(),t=b(this).closest(".time-range").find(".calendar_recurrence_start_time").val(),a=b(this).closest(".time-range").find(".calendar_recurrence_end_time").val();b.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"el_check_calendar_recurrence_time_book",number_time:e,start_time:t,end_time:a},success:function(e){e=JSON.parse(e);if(e.msg)return alert(e.msg),!1}})})},el_time_slot_timepicker:function(){b(".calendar_recurrence_ts_start, .calendar_recurrence_ts_end, input.el-ticket-edit-time, input.el-ticket-time").each(function(){var e;e="12"==b(this).attr("data-time")?"hh:mm p":"HH:mm",b(this).on("keypress",function(e){e.preventDefault()}),b(this).timepicker({timeFormat:e,interval:15,dynamic:!1,dropdown:!0,scrollbar:!0})})},el_time_slot:function(){function n(){b(".ts-item .close").on("click",function(){b(this).closest(".ts-item").remove(),s()})}function s(){0<b("#weekly-selector .ts-item").length&&"weekly"==b('select[name="ova_mb_event_recurrence_frequency"]').val()?(b("#mb_calendar .auto .time-range").hide(),b("#mb_calendar .auto .time-range").find(".calendar_recurrence_start_time, .calendar_recurrence_end_time").removeAttr("required"),b("#mb_calendar .auto .schedules_time:first").hide(),b("#mb_calendar .auto .disable_date").hide(),b("#mb_calendar .auto .disable_time_slot").show()):("auto"!=b('#mb_calendar .option_calendar input[name="ova_mb_event_option_calendar"]:checked').val()?b("#mb_calendar .auto .time-range").find(".calendar_recurrence_start_time, .calendar_recurrence_end_time").removeAttr("required"):(b("#mb_calendar .auto .time-range").show(),b("#mb_calendar .auto .time-range").find(".calendar_recurrence_start_time, .calendar_recurrence_end_time").attr("required","required"),b("#mb_calendar .auto .schedules_time:first").show(),b("#mb_calendar .auto .disable_date").show()),b("#mb_calendar .auto .disable_time_slot").hide()),b("#weekly-selector .ts-list").each(function(){var a=0;b(this).find(".ts-item").each(function(){var e="ova_mb_event_",t=b(this).data("key");b(this).find("input.calendar_recurrence_ts_start").attr("name",e+"ts_start["+t+"]["+a+"]"),b(this).find("input.calendar_recurrence_ts_end").attr("name",e+"ts_end["+t+"]["+a+"]"),a++})})}b("button.add_time_slot").each(function(){b(this).on("click",function(e){e.preventDefault();var e=b(this).data("key"),t=b(this).data("placeholder"),a=b(this).data("time"),i="";i=(i+='<div class="ts-item" data-key="'+e+'">')+'<input type="text" class="calendar_recurrence_ts_start" name="ova_mb_event_ts_start['+e+'][]" autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="'+t+'" data-time="'+a+'"><input type="text" class="calendar_recurrence_ts_end" name="ova_mb_event_ts_end['+e+'][]" autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="'+t+'" data-time="'+a+'"><span class="close">x</span></div>',b(this).closest(".ts_recurrence_bydays").find(".ts-list").append(i);EL_Admin.el_time_slot_timepicker(),s(),n()})}),b('select[name="ova_mb_event_recurrence_frequency"]').on("change",function(){s()}),s(),n()},el_system_fee:function(){function e(){var e=b("select#type_system_fee").val();"percent"==e?(b("#percent_system_fee").closest("tr").show(),b("#fixed_system_fee").closest("tr").hide()):("amount"==e?b("#percent_system_fee").closest("tr").hide():b("#percent_system_fee").closest("tr").show(),b("#fixed_system_fee").closest("tr").show())}0<b("select#type_system_fee").length&&(e(),b("select#type_system_fee").change(function(){e()}))},el_edit_ticket_detail:function(){b(".el-edit-ticket .el-btn-edit").on("click",function(){b(this).closest(".el-edit-ticket").find("input.el-ticket-edit-date").show(),b(this).closest(".el-edit-ticket").find("input.el-ticket-edit-time").show(),b(this).hide()})},el_replace_ticket_date:function(){function u(){b(".el-edit-ticket-dates .ticket-pagination").each(function(){var n=b(this),e=n.closest(".el-edit-ticket-dates").find("form.form-filter"),s=n.closest(".el-edit-ticket-dates").find("tbody.ticket-list"),o=n.closest(".el-edit-ticket-dates").find(".displaying-num"),c=n.closest(".wrap-ticket-replace-date").find(".el_loading"),_=e.find('select[name="events"]').val(),l=e.find('input[name="ticket_start_date"]').val(),d=e.find('input[name="ticket_start_time"]').val(),r=e.find('input[name="ticket_end_date"]').val(),p=e.find('input[name="ticket_end_time"]').val(),m=e.find('input[name="ticket_replaced_date"]:checked').val(),u=n.find(".el-first"),f=n.find(".el-prev"),v=n.find(".el-next"),h=n.find(".el-last"),k=n.find(".el-current");n.find(".btn-pagination").on("click",function(e){e.preventDefault();var t=b(this),a=b(this).attr("data-paged"),e=n.find('select[name="el_posts_per_page"]').val(),i=n.find(".total-page").attr("data-max-pages");b(this).hasClass("disable")||(c.show(),b.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"el_replace_ticket_date_pagination",event_id:_,start_date:l,start_time:d,end_date:r,end_time:p,replaced:m,posts_per_page:e,paged:a},success:function(e){e&&(e=JSON.parse(e),s.html("").append(e.result),o.html("").append(e.count)),k.text(a),k.attr("data-paged",a),parseInt(a)==parseInt(i)&&(u.removeClass("disable"),f.removeClass("disable"),v.addClass("disable"),h.addClass("disable"),f.attr("data-paged",parseInt(a)-1),v.attr("data-paged",parseInt(a))),1==parseInt(a)&&(u.addClass("disable"),f.addClass("disable"),v.removeClass("disable"),h.removeClass("disable"),f.attr("data-paged",parseInt(a)),v.attr("data-paged",parseInt(a)+1)),1<parseInt(a)&&parseInt(a)<parseInt(i)&&(u.removeClass("disable"),f.removeClass("disable"),v.removeClass("disable"),h.removeClass("disable"),t.hasClass("el-next")&&(f.attr("data-paged",parseInt(a)-1),v.attr("data-paged",parseInt(a)+1)),t.hasClass("el-prev"))&&(f.attr("data-paged",parseInt(a)-1),v.attr("data-paged",parseInt(a)+1)),c.hide()}}))})})}b(".el-ticket-filter select#el-events").each(function(){b(this).select2({allowClear:!0})}),b(".el-edit-ticket-dates .ticket-action .btn-apply").on("click",function(e){e.preventDefault(),"replace"==b(this).closest(".ticket-action").find('select[name="action"]').val()&&b(this).closest(".el-edit-ticket-dates").find(".popup-action").show()}),b(".el-edit-ticket-dates .popup-action .replace-close").on("click",function(e){e.preventDefault(),b(this).closest(".popup-action").hide()}),b(".el-edit-ticket-dates .popup-send-mail .replace-close").on("click",function(e){e.preventDefault(),b(this).closest(".popup-send-mail").hide()}),b(".el-edit-ticket-dates .el-ticket-filter .btn-search").on("click",function(e){var t=b(this),a=t.closest("form.form-filter"),i=t.closest(".el-edit-ticket-dates").find("tbody.ticket-list"),n=t.closest(".el-edit-ticket-dates").find(".displaying-num"),s=t.closest(".el-edit-ticket-dates").find(".ticket-action .right-action"),o=t.closest(".wrap-ticket-replace-date").find(".el_loading"),c=a.find('select[name="events"]').val(),_=a.find('input[name="ticket_start_date"]').val(),l=a.find('input[name="ticket_start_time"]').val(),d=a.find('input[name="ticket_end_date"]').val(),r=a.find('input[name="ticket_end_time"]').val(),a=a.find('input[name="ticket_replaced_date"]:checked').val(),p=t.closest(".el-edit-ticket-dates").find('.ticket-pagination select[name="el_posts_per_page"]').val(),m=t.closest(".el-edit-ticket-dates").find(".ticket-pagination");c&&(e.preventDefault(),o.show(),b.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"el_replace_get_tickets",event_id:c,start_date:_,start_time:l,end_date:d,end_time:r,replaced:a,posts_per_page:p},success:function(e){e&&(e=JSON.parse(e),i.html("").append(e.result),n.html("").append(e.count),e.error?s.hide():s.show(),m.html("").append(e.pagination)),o.hide(),b('.el-edit-ticket-dates .ticket-pagination select[name="el_posts_per_page"]').on("change",function(){var e=b(this),t=e.closest(".el-edit-ticket-dates").find("form.form-filter"),a=e.closest(".el-edit-ticket-dates").find("tbody.ticket-list"),i=e.closest(".el-edit-ticket-dates").find(".displaying-num"),n=e.closest(".wrap-ticket-replace-date").find(".el_loading"),s=e.closest(".ticket-pagination").find(".pagination-links"),o=t.find('select[name="events"]').val(),c=t.find('input[name="ticket_start_date"]').val(),_=t.find('input[name="ticket_start_time"]').val(),l=t.find('input[name="ticket_end_date"]').val(),d=t.find('input[name="ticket_end_time"]').val(),t=t.find('input[name="ticket_replaced_date"]:checked').val();o&&(n.show(),b.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"el_replace_ticket_date_posts_per_page",event_id:o,start_date:c,start_time:_,end_date:l,end_time:d,replaced:t,posts_per_page:e.val()},success:function(e){e&&(e=JSON.parse(e),a.html("").append(e.result),i.html("").append(e.count),s.html("").append(e.pagination)),n.hide(),u()}}))}),u()}}))}),b(".el-edit-ticket-dates .el-ticket-replace .btn-update").on("click",function(e){var t=b(this),a=t.closest("form.form-update"),i=t.closest("form.form-update").find(".mb-loading"),n=t.closest("form.form-update").find(".el_result .el_success"),s=t.closest("form.form-update").find(".el_result .el_error"),o=(n.hide(),s.hide(),a.find('input[name="ticket_start_date_replace"]').val()),c=a.find('input[name="ticket_start_time_replace"]').val(),_=a.find('input[name="ticket_end_date_replace"]').val(),a=a.find('input[name="ticket_end_time_replace"]').val(),l=[];o&&c&&_&&a&&(e.preventDefault(),i.css("display","flex"),t.closest(".el-edit-ticket-dates").find('.ticket-list input[type="checkbox"]:checked').each(function(){l.push(b(this).val())}),b.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"el_replace_ticket_date",ticket_ids:l,start_date:o,start_time:c,end_date:_,end_time:a},success:function(e){e&&((e=JSON.parse(e)).error?s:n).html("").append(e.result).show(),i.hide()}}))}),b(".el-edit-ticket-dates .ticket-action .btn-export-email").on("click",function(e){e.preventDefault();var e=b(this).closest(".el-edit-ticket-dates").find("form.form-filter"),i=e.find('select[name="events"]').val(),t=e.find('input[name="ticket_start_date"]').val(),a=e.find('input[name="ticket_start_time"]').val(),n=e.find('input[name="ticket_end_date"]').val(),s=e.find('input[name="ticket_end_time"]').val(),e=e.find('input[name="ticket_replaced_date"]:checked').val(),o=b(this).closest(".wrap-ticket-replace-date").find(".el_loading");i&&(o.show(),b.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"el_replace_ticket_date_export_email",event_id:i,start_date:t,start_time:a,end_date:n,end_time:s,replaced:e},success:function(e){if(e){e=JSON.parse(e);let t="data:text/csv;charset=UTF-8,\ufeff";e.forEach(function(e){e=e.join(",");t+=e+"\r\n"});var e=encodeURI(t),a=document.createElement("a");a.setAttribute("href",e),a.setAttribute("download","ticket_customer_emails_"+i+".csv"),document.body.appendChild(a),a.click()}o.hide()}}))}),b(".el-edit-ticket-dates .ticket-action .btn-send-mail").on("click",function(e){e.preventDefault(),b(this).closest(".el-edit-ticket-dates").find(".popup-send-mail").show()}),b(".el-edit-ticket-dates .popup-send-mail .form-send-mail .btn-send-now").on("click",function(e){var t=b(this).closest(".el-edit-ticket-dates").find("form.form-filter"),a=t.find('select[name="events"]').val(),i=t.find('input[name="ticket_start_date"]').val(),n=t.find('input[name="ticket_start_time"]').val(),s=t.find('input[name="ticket_end_date"]').val(),o=t.find('input[name="ticket_end_time"]').val(),t=t.find('input[name="ticket_replaced_date"]:checked').val(),c=b(this).closest("form.form-send-mail").find(".mb-loading"),_=b(this).closest("form.form-send-mail").find(".el_result .el_success"),l=b(this).closest("form.form-send-mail").find(".el_result .el_error"),d=(_.hide(),l.hide(),b(this).closest("form.form-send-mail")),r=d.find('input[name="ticket_email_subject"]').val(),p=d.find('input[name="ticket_email_from_name"]').val(),m=d.find('input[name="ticket_email_send_from"]').val(),u=tinyMCE.get("ticket_email_content"),u=u?u.getContent():d.find("#ticket_email_content").val();r&&p&&m&&(e.preventDefault(),a)&&(c.css("display","flex"),b.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"el_replace_ticket_date_send_email",event_id:a,start_date:i,start_time:n,end_date:s,end_time:o,replaced:t,subject:r,from_name:p,send_from:m,content:u},success:function(e){e&&((e=JSON.parse(e)).error?l:_).html("").append(e.result).show(),c.hide()}}))})},el_pdf_invoice:function(){var a;b('.el-image input[type="hidden"]').each(function(){b(this).val()&&b(this).closest(".el-image").find(".btn-actions .btn-remove").css("display","inline-block")}),b(document).on("click",".el-image .btn-actions .btn-add",function(e){e.preventDefault();var t=b(this);return a&&a.close(),(a=wp.media.frames.imageFrame=wp.media({multiple:!1})).on("select",function(){t.parent().data("index");a.state().get("selection").map(function(e){e=e.toJSON(),t.closest(".el-image").find('input[type="hidden"]').val(e.id),e.sizes.el_thumbnail?t.closest(".el-image").find(".img").html('<img class="image-preview" src="'+e.sizes.el_thumbnail.url+'" alt="'+e.alt+'" />'):t.closest(".el-image").find(".img").html('<img class="image-preview" src="'+e.sizes.full.url+'" alt="'+e.alt+'" />'),t.closest(".btn-actions").find(".btn-remove").css("display","inline-block")})}),a.open(t),!1}),b(document).on("click",".el-image .btn-actions .btn-remove",function(e){e.preventDefault(),b(this).closest(".el-image").find('input[type="hidden"]').val(""),b(this).closest(".el-image").find("img.image-preview").remove(),b(this).hide()}),b(".create-invoice").off().on("click",function(e){e.preventDefault();var a=b(this),e=a.data("booking-id"),t=a.data("nonce");a.siblings(".submit-load-more.booking-invoice").css({"z-index":"1"}),a.siblings(".mb-loading").css({display:"inline-flex"}),b.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"create_invoice",invoice_nonce:t,booking_id:e},success:function(e){var t;e&&(t=(e=JSON.parse(e)).pdf_url,e.error?b(".error").text(e.error).css({display:"block",color:"#dc3545"}):((e=document.createElement("a")).href=t,e.target="_blank",e.dispatchEvent(new MouseEvent("click")))),a.siblings(".submit-load-more.booking-invoice").css({"z-index":"-1"}),a.siblings(".mb-loading").css({display:"none"})}})}),b(".send-invoice").off().on("click",function(e){e.preventDefault();var t=b(this),e=t.data("booking-id"),a=t.data("nonce");t.siblings(".submit-load-more.booking-send-invoice").css({"z-index":"1"}),t.siblings(".mb-loading").css({display:"inline-flex"}),b.ajax({url:ajax_object.ajax_url,type:"POST",data:{action:"send_invoice",invoice_nonce:a,booking_id:e},success:function(e){e&&(e=JSON.parse(e),b(".el_booking_detail .status").css("display","none"),e.error?b(".error").text(e.error).css({display:"block",color:"#dc3545"}):b(".success").text(e.message).css({display:"block",color:"#28a745"})),t.siblings(".submit-load-more.booking-send-invoice").css({"z-index":"-1"}),t.siblings(".mb-loading").css({display:"none"})}})})},el_payout_edit:function(){var e=b(document).find('.el_payment_detail select[name="ova_mb_event_withdrawal_status"]');"Pending"===e.val()&&b(document).find(".el_payment_detail .ova_payout_extra_info").hide(),e.on("change",function(e){b("option:selected",this);"Pending"===this.value?b(document).find(".el_payment_detail .ova_payout_extra_info").hide():b(document).find(".el_payment_detail .ova_payout_extra_info").show()})},el_admin_validate_price_tiket:function(){var e,t,r,p;b(document).find('.ova_wrap_price_ticket input[type="text"]').length&&(e=b(document).find('.ova_wrap_price_ticket input[type="text"]'),t=b(document).find(".ova_wrap_price_ticket").data("curency"),r=t.decimal_separator,p=t.number_decimals,p=parseInt(p),e.each(function(e,l){var d=b(l).next();b(l).on("change",function(e){var t=b(l).val(),a=new RegExp("[^0-9\\"+r+"]+","gi"),i=new RegExp("\\"+r+"+","gi"),n=new RegExp("\\"+r+"$"),s=new RegExp("^\\"+r),o=t.replace(a,"").replace(i,r);if(""!=(o=(o=o.replace(s,"").length?o.replace(s,""):o).replace(n,"").length?o.replace(n,""):o)&&-1!=o.lastIndexOf(r)){a=o.lastIndexOf(r),i=o.length,s=a+p;if(0<i-1-s)o=o.slice(0,s+1);else for(var c=s-i+1,_=0;_<c;_++)o+="0"}o!==t&&b(l).val(o),d.fadeOut()}).on("keyup",function(e){var t=b(l).val(),a=new RegExp("[^0-9\\"+r+"]+","gi"),i=new RegExp("[^\\"+r+"]","gi"),a=t.replace(a,"");(a=1<t.replace(i,"").length?a.replace(r,""):a)!==t&&(b(l).val(a),d.fadeIn())})}))}},b(document).ready(function(){EL_Admin.init()})}(jQuery);